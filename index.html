<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shital Ghimire - Civil Engineering Portfolio & License Hub</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
</head>
<body>
    <!-- Navigation Menu -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">Shital Ghimire</div>
            <ul class="nav-menu">
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#license-hub">License Hub</a></li>
                <li><a href="#tools">Tools</a></li>
                <li><a href="#games">Games</a></li>
                <li><a href="#chat">Chat</a></li>
                <li><a href="#nepse">NEPSE</a></li>
                <li><a href="#calendar">Calendar</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <div class="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <div class="social-links">
                    <a href="https://www.facebook.com/sital.ghimire.229969" class="social-link" target="_blank"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://www.youtube.com/@sehack" class="social-link" target="_blank"><i class="fab fa-youtube"></i></a>
                </div>
                <div class="hero-text">
                    <h1>I am Shital Ghimire</h1>
                    <p>Fourth-year civil engineering student passionate about building sustainable infrastructure & helping peers achieve their NEC engineering license.</p>
                    <div class="hero-buttons">
                        <a href="#license-hub" class="btn-primary">🎓 License Hub</a>
                        <a href="#chat" class="btn-secondary">Chat with Shital</a>
                    </div>
                    <div id="clock" class="clock"></div>
                    <div id="location" class="location"></div>
                </div>
            </div>
            <div class="hero-image">
                <img src="your-photo.jpg" alt="Shital Ghimire">
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about">
        <div class="container">
            <h2>About Me</h2>
            <div class="about-content">
                <p>Hello! I'm a fourth-year civil engineering student from Tandi, Chitwan, currently pursuing my degree at Kathmandu University. My passion for civil engineering started with a fascination for the structures and infrastructure that shape our world. Beyond academics, I've created Nepal's first comprehensive NEC License Preparation Hub to help fellow engineering students achieve their professional licensing goals.</p>
            </div>
        </div>
    </section>

    <!-- LICENSE PREPARATION HUB - COMPLETE SECTION -->
    <section id="license-hub" class="license-hub">
        <div class="container">
            <!-- Hero Section -->
            <div class="license-hero">
                <div class="section-header">
                    <h2><i class="fas fa-graduation-cap"></i> NEC License Preparation Hub</h2>
                    <div class="section-line"></div>
                    <p>Nepal's First 3D Interactive License Exam Preparation Platform</p>
                </div>
                
                <!-- Progress Tracker -->
                <div class="progress-tracker">
                    <div class="progress-step active" data-step="1">
                        <div class="step-circle">
                            <div class="step-icon"><i class="fas fa-info-circle"></i></div>
                            <div class="step-number">1</div>
                        </div>
                        <div class="step-info">
                            <h4>Understanding</h4>
                            <p>Requirements & Process</p>
                        </div>
                    </div>
                    <div class="progress-step" data-step="2">
                        <div class="step-circle">
                            <div class="step-icon"><i class="fas fa-book"></i></div>
                            <div class="step-number">2</div>
                        </div>
                        <div class="step-info">
                            <h4>Syllabus</h4>
                            <p>Topic Mastery</p>
                        </div>
                    </div>
                    <div class="progress-step" data-step="3">
                        <div class="step-circle">
                            <div class="step-icon"><i class="fas fa-library"></i></div>
                            <div class="step-number">3</div>
                        </div>
                        <div class="step-info">
                            <h4>Resources</h4>
                            <p>Study Materials</p>
                        </div>
                    </div>
                    <div class="progress-step" data-step="4">
                        <div class="step-circle">
                            <div class="step-icon"><i class="fas fa-gamepad"></i></div>
                            <div class="step-number">4</div>
                        </div>
                        <div class="step-info">
                            <h4>3D Practice</h4>
                            <p>MCQ Arena</p>
                        </div>
                    </div>
                    <div class="progress-step" data-step="5">
                        <div class="step-circle">
                            <div class="step-icon"><i class="fas fa-trophy"></i></div>
                            <div class="step-number">5</div>
                        </div>
                        <div class="step-info">
                            <h4>Success</h4>
                            <p>Licensed Engineer</p>
                        </div>
                    </div>
                    <div class="progress-line-bg"></div>
                    <div class="progress-line"></div>
                </div>

                <!-- Quick Stats Dashboard -->
                <div class="stats-dashboard">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-question-circle"></i></div>
                        <div class="stat-info">
                            <div class="stat-number" id="total-questions">2,247</div>
                            <div class="stat-label">Practice Questions</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-file-pdf"></i></div>
                        <div class="stat-info">
                            <div class="stat-number" id="study-materials">150+</div>
                            <div class="stat-label">Study Materials</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <div class="stat-info">
                            <div class="stat-number" id="success-rate">89%</div>
                            <div class="stat-label">Success Rate</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-clock"></i></div>
                        <div class="stat-info">
                            <div class="stat-number" id="study-hours">500+</div>
                            <div class="stat-label">Content Hours</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Smart Resource Library -->
            <div class="resource-library">
                <h3><i class="fas fa-library"></i> Smart Resource Library</h3>
                <div class="library-navigation">
                    <div class="search-section">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Search across all materials..." id="library-search">
                            <button class="search-btn"><i class="fas fa-filter"></i></button>
                        </div>
                    </div>
                    <div class="library-categories">
                        <button class="category-btn active" data-category="all">All Materials</button>
                        <button class="category-btn" data-category="syllabus">Syllabus</button>
                        <button class="category-btn" data-category="notes">Study Notes</button>
                        <button class="category-btn" data-category="questions">Question Sets</button>
                        <button class="category-btn" data-category="references">References</button>
                    </div>
                </div>
                
                <div class="library-grid">
                    <!-- PDF Documents -->
                    <div class="resource-card" data-category="syllabus">
                        <div class="resource-icon">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <div class="resource-info">
                            <h4>Official NEC Civil Engineering Syllabus</h4>
                            <p>Complete syllabus breakdown with weightage and chapter distribution</p>
                            <div class="resource-meta">
                                <span><i class="fas fa-file"></i> 20 pages</span>
                                <span><i class="fas fa-download"></i> 1,247 downloads</span>
                            </div>
                            <div class="resource-actions">
                                <button class="btn-view" onclick="viewPDF('syllabus-civil-engineering')">
                                    <i class="fas fa-eye"></i> View
                                </button>
                                <button class="btn-download" onclick="downloadPDF('Syllabus-of-Civil-engineering-ppt.pptx.pdf')">
                                    <i class="fas fa-download"></i> Download
                                </button>
                                <button class="btn-bookmark" onclick="bookmarkResource('syllabus')">
                                    <i class="fas fa-bookmark"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="resource-card" data-category="questions">
                        <div class="resource-icon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <div class="resource-info">
                            <h4>APEX Question Set Collection</h4>
                            <p>2,247 MCQs from APEX Educational Academy - Sets 1-6</p>
                            <div class="resource-meta">
                                <span><i class="fas fa-file"></i> 6 sets</span>
                                <span><i class="fas fa-download"></i> 2,891 downloads</span>
                            </div>
                            <div class="resource-actions">
                                <button class="btn-view" onclick="viewQuestionSets()">
                                    <i class="fas fa-eye"></i> Browse
                                </button>
                                <button class="btn-practice" onclick="startPracticeFromLibrary()">
                                    <i class="fas fa-play"></i> Practice Now
                                </button>
                                <button class="btn-download" onclick="downloadAllQuestions()">
                                    <i class="fas fa-download"></i> Download All
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="resource-card" data-category="notes">
                        <div class="resource-icon">
                            <i class="fas fa-sticky-note"></i>
                        </div>
                        <div class="resource-info">
                            <h4>Chapter-wise Study Notes</h4>
                            <p>Comprehensive notes for all 10 chapters with formulas and concepts</p>
                            <div class="resource-meta">
                                <span><i class="fas fa-book"></i> 10 chapters</span>
                                <span><i class="fas fa-download"></i> 856 downloads</span>
                            </div>
                            <div class="resource-actions">
                                <button class="btn-view" onclick="viewNotes()">
                                    <i class="fas fa-eye"></i> Browse Notes
                                </button>
                                <button class="btn-download" onclick="downloadNotes()">
                                    <i class="fas fa-download"></i> Download
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="resource-card" data-category="questions">
                        <div class="resource-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="resource-info">
                            <h4>Set 6 - Council License Exam</h4>
                            <p>Latest question set with solutions and explanations</p>
                            <div class="resource-meta">
                                <span><i class="fas fa-question"></i> 100 questions</span>
                                <span><i class="fas fa-download"></i> 542 downloads</span>
                            </div>
                            <div class="resource-actions">
                                <button class="btn-view" onclick="viewPDF('set-6-council-exam')">
                                    <i class="fas fa-eye"></i> View
                                </button>
                                <button class="btn-practice" onclick="practiceSet6()">
                                    <i class="fas fa-play"></i> Practice
                                </button>
                                <button class="btn-download" onclick="downloadPDF('Set-6-of-council-license-exam.pdf')">
                                    <i class="fas fa-download"></i> Download
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3D MCQ Practice Arena -->
            <div class="mcq-arena">
                <h3><i class="fas fa-cube"></i> Revolutionary 3D MCQ Practice Arena</h3>
                <div class="arena-intro">
                    <p>Experience Nepal's first 3D interactive MCQ practice environment! Immerse yourself in a virtual study space with adaptive learning technology.</p>
                </div>
                
                <div class="arena-modes">
                    <div class="mode-card" data-mode="quickfire">
                        <div class="mode-icon">🚀</div>
                        <div class="mode-content">
                            <h4>Quick Fire Mode</h4>
                            <p>Rapid-fire MCQs to boost speed and accuracy</p>
                            <div class="mode-stats">
                                <span>⏱️ 30 seconds per question</span>
                                <span>🎯 20 questions</span>
                                <span>⚡ Instant feedback</span>
                            </div>
                        </div>
                        <button class="mode-btn" onclick="startQuickFire()">Launch Quick Fire</button>
                    </div>
                    
                    <div class="mode-card" data-mode="deepdive">
                        <div class="mode-icon">🔬</div>
                        <div class="mode-content">
                            <h4>Deep Dive Mode</h4>
                            <p>Detailed explanations with concept reinforcement</p>
                            <div class="mode-stats">
                                <span>📚 Detailed explanations</span>
                                <span>🧠 Concept mapping</span>
                                <span>📊 Progress tracking</span>
                            </div>
                        </div>
                        <button class="mode-btn" onclick="startDeepDive()">Enter Deep Dive</button>
                    </div>
                    
                    <div class="mode-card" data-mode="mockexam">
                        <div class="mode-icon">📝</div>
                        <div class="mode-content">
                            <h4>Mock Exam Mode</h4>
                            <p>Full-length timed exam simulation (2 hours)</p>
                            <div class="mode-stats">
                                <span>⏰ 2 hours (120 minutes)</span>
                                <span>❓ 100 questions (60+40)</span>
                                <span>🎯 Real exam conditions</span>
                            </div>
                        </div>
                        <button class="mode-btn" onclick="startMockExam()">Take Mock Exam</button>
                    </div>
                    
                    <div class="mode-card" data-mode="topicfocus">
                        <div class="mode-icon">🎯</div>
                        <div class="mode-content">
                            <h4>Topic Focus Mode</h4>
                            <p>Subject-specific targeted practice sessions</p>
                            <div class="mode-stats">
                                <span>📖 10 main topics</span>
                                <span>🔍 Weakness analysis</span>
                                <span>📈 Strength building</span>
                            </div>
                        </div>
                        <button class="mode-btn" onclick="startTopicFocus()">Choose Topic</button>
                    </div>
                </div>

                <!-- 3D Arena Container -->
                <div id="arena-3d-container" class="arena-3d-container">
                    <div class="arena-controls">
                        <button id="arena-fullscreen" class="control-btn" title="Fullscreen">
                            <i class="fas fa-expand"></i>
                        </button>
                        <button id="arena-settings" class="control-btn" title="Settings">
                            <i class="fas fa-cog"></i>
                        </button>
                        <button id="arena-help" class="control-btn" title="Help">
                            <i class="fas fa-question"></i>
                        </button>
                        <button id="arena-reset" class="control-btn" title="Reset View">
                            <i class="fas fa-redo"></i>
                        </button>
                    </div>
                    <div id="arena-loading" class="arena-loading">
                        <div class="loading-animation">
                            <div class="loading-sphere"></div>
                            <div class="loading-text">
                                <h4>Preparing 3D Environment...</h4>
                                <p>Loading questions and setting up virtual space</p>
                            </div>
                        </div>
                    </div>
                    <canvas id="arena-canvas"></canvas>
                </div>

                <!-- Question Display Area -->
                <div id="question-display" class="question-display" style="display: none;">
                    <div class="question-header">
                        <div class="question-info">
                            <span class="question-number">Question 1 of 80</span>
                            <span class="question-topic">Basic Civil Engineering</span>
                            <span class="question-difficulty">Medium</span>
                        </div>
                        <div class="question-timer">
                            <i class="fas fa-clock"></i>
                            <span id="timer">02:00</span>
                        </div>
                    </div>
                    <div class="question-content">
                        <div class="question-text">
                            <p id="current-question">Loading question...</p>
                        </div>
                        <div class="answer-options">
                            <div class="option" data-option="a" onclick="selectOption('a')">
                                <span class="option-label">A)</span>
                                <span class="option-text" id="option-a">Option A</span>
                            </div>
                            <div class="option" data-option="b" onclick="selectOption('b')">
                                <span class="option-label">B)</span>
                                <span class="option-text" id="option-b">Option B</span>
                            </div>
                            <div class="option" data-option="c" onclick="selectOption('c')">
                                <span class="option-label">C)</span>
                                <span class="option-text" id="option-c">Option C</span>
                            </div>
                            <div class="option" data-option="d" onclick="selectOption('d')">
                                <span class="option-label">D)</span>
                                <span class="option-text" id="option-d">Option D</span>
                            </div>
                        </div>
                        <div class="question-actions">
                            <button class="btn-prev" onclick="previousQuestion()">
                                <i class="fas fa-chevron-left"></i> Previous
                            </button>
                            <button class="btn-bookmark" onclick="bookmarkQuestion()">
                                <i class="fas fa-bookmark"></i> Bookmark
                            </button>
                            <button class="btn-hint" onclick="showHint()">
                                <i class="fas fa-lightbulb"></i> Hint
                            </button>
                            <button class="btn-next" onclick="nextQuestion()">
                                Next <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    <div class="question-feedback" id="question-feedback" style="display: none;">
                        <div class="feedback-content">
                            <div class="feedback-result">
                                <i class="feedback-icon"></i>
                                <span class="feedback-text"></span>
                            </div>
                            <div class="feedback-explanation">
                                <h5>Explanation:</h5>
                                <p id="explanation-text"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance Analytics Dashboard -->
            <div class="analytics-dashboard">
                <h3><i class="fas fa-chart-line"></i> Performance Analytics</h3>
                <div class="analytics-grid">
                    <div class="analytics-card">
                        <h4>Overall Progress</h4>
                        <div class="progress-ring-container">
                            <div class="progress-ring">
                                <svg width="120" height="120">
                                    <circle cx="60" cy="60" r="50" stroke="#ddd" stroke-width="8" fill="none"/>
                                    <circle cx="60" cy="60" r="50" stroke="#4CAF50" stroke-width="8" fill="none"
                                            stroke-dasharray="314" stroke-dashoffset="188" id="progress-circle"/>
                                </svg>
                                <div class="progress-text">
                                    <span class="progress-percentage">67%</span>
                                    <span class="progress-label">Complete</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="analytics-card">
                        <h4>Topic Strength Analysis</h4>
                        <div class="strength-chart">
                            <div class="strength-item">
                                <span>Structural Mechanics</span>
                                <div class="strength-bar">
                                    <div class="strength-fill" style="width: 89%" data-strength="89"></div>
                                </div>
                                <span>89%</span>
                            </div>
                            <div class="strength-item">
                                <span>Soil Mechanics</span>
                                <div class="strength-bar">
                                    <div class="strength-fill" style="width: 76%" data-strength="76"></div>
                                </div>
                                <span>76%</span>
                            </div>
                            <div class="strength-item">
                                <span>Water Resources</span>
                                <div class="strength-bar">
                                    <div class="strength-fill" style="width: 82%" data-strength="82"></div>
                                </div>
                                <span>82%</span>
                            </div>
                            <div class="strength-item">
                                <span>Transportation</span>
                                <div class="strength-bar">
                                    <div class="strength-fill" style="width: 71%" data-strength="71"></div>
                                </div>
                                <span>71%</span>
                            </div>
                            <div class="strength-item">
                                <span>Project Management</span>
                                <div class="strength-bar">
                                    <div class="strength-fill" style="width: 64%" data-strength="64"></div>
                                </div>
                                <span>64%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="analytics-card">
                        <h4>Study Statistics</h4>
                        <div class="study-stats">
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-calendar-day"></i>
                                </div>
                                <div class="stat-details">
                                    <span class="stat-value">28</span>
                                    <span class="stat-label">Study Days</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-question-circle"></i>
                                </div>
                                <div class="stat-details">
                                    <span class="stat-value">1,247</span>
                                    <span class="stat-label">Questions Solved</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <div class="stat-details">
                                    <span class="stat-value">18</span>
                                    <span class="stat-label">Mock Tests</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stat-details">
                                    <span class="stat-value">89h</span>
                                    <span class="stat-label">Study Time</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="analytics-card">
                        <h4>Recent Activity</h4>
                        <div class="activity-feed">
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="activity-content">
                                    <span>Completed Mock Test 18</span>
                                    <small>Score: 84/100 - 2 hours ago</small>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-book"></i>
                                </div>
                                <div class="activity-content">
                                    <span>Studied Hydropower Chapter</span>
                                    <small>45 minutes - 1 day ago</small>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-target"></i>
                                </div>
                                <div class="activity-content">
                                    <span>Quick Fire Session</span>
                                    <small>18/20 correct - 2 days ago</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Success Stories & Community -->
            <div class="community-section">
                <h3><i class="fas fa-users"></i> Success Stories & Community</h3>
                <div class="community-tabs">
                    <button class="tab-btn active" data-tab="success-stories">Success Stories</button>
                    <button class="tab-btn" data-tab="discussions">Discussions</button>
                    <button class="tab-btn" data-tab="tips">Tips & Tricks</button>
                    <button class="tab-btn" data-tab="doubt-clearing">Doubt Clearing</button>
                </div>
                
                <div class="community-content">
                    <div id="success-stories" class="tab-content active">
                        <div class="success-story-grid">
                            <div class="success-card">
                                <div class="success-header">
                                    <div class="success-avatar">
                                        <i class="fas fa-user-graduate"></i>
                                    </div>
                                    <div class="success-info">
                                        <h4>Rajesh Kumar</h4>
                                        <span>Licensed Civil Engineer - 2024</span>
                                    </div>
                                </div>
                                <div class="success-content">
                                    <p>"The 3D practice arena was a game-changer! I passed with 87% score. The interactive questions made studying so much more engaging."</p>
                                    <div class="success-stats">
                                        <span><i class="fas fa-chart-line"></i> 87% Score</span>
                                        <span><i class="fas fa-calendar"></i> 3 months prep</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="success-card">
                                <div class="success-header">
                                    <div class="success-avatar">
                                        <i class="fas fa-user-graduate"></i>
                                    </div>
                                    <div class="success-info">
                                        <h4>Priya Sharma</h4>
                                        <span>Licensed Civil Engineer - 2024</span>
                                    </div>
                                </div>
                                <div class="success-content">
                                    <p>"Mock tests were incredibly helpful. The difficulty level matched exactly with the real exam. Highly recommend to everyone!"</p>
                                    <div class="success-stats">
                                        <span><i class="fas fa-chart-line"></i> 91% Score</span>
                                        <span><i class="fas fa-calendar"></i> 4 months prep</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="discussions" class="tab-content">
                        <div class="discussion-list">
                            <div class="discussion-item">
                                <div class="discussion-avatar">
                                    <i class="fas fa-user-circle"></i>
                                </div>
                                <div class="discussion-content">
                                    <h4>How to approach Structural Mechanics questions?</h4>
                                    <p>I'm having difficulty with determinate and indeterminate structures. Any tips?</p>
                                    <div class="discussion-meta">
                                        <span><i class="fas fa-reply"></i> 23 replies</span>
                                        <span><i class="fas fa-heart"></i> 15 likes</span>
                                        <span><i class="fas fa-clock"></i> 3 hours ago</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Your existing sections... -->
    <!-- Skills Section -->
    <section id="skills" class="skills">
        <div class="container">
            <h2>My Skills</h2>
            <div class="skills-grid">
                <div class="skill-item">
                    <i class="fas fa-drafting-compass"></i>
                    <h3>AutoCAD</h3>
                    <p>Professional engineering drafting and design.</p>
                </div>
                <div class="skill-item">
                    <i class="fas fa-paint-brush"></i>
                    <h3>Graphic Designing</h3>
                    <p>Creative visual design and branding.</p>
                </div>
                <div class="skill-item">
                    <i class="fas fa-graduation-cap"></i>
                    <h3>License Preparation</h3>
                    <p>Nepal's first 3D interactive license exam preparation platform.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Tools Section -->
    <section id="tools" class="tools">
        <div class="container">
            <div class="section-header">
                <h2><i class="fas fa-tools"></i> Engineering Tools</h2>
                <div class="section-line"></div>
                <p>Professional tools for calculations and productivity</p>
            </div>
            <div class="tools-container">
                <!-- Calculator Tool -->
                <div class="tool-card calculator-card">
                    <div class="tool-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <div class="tool-content">
                        <h3>Smart Calculator</h3>
                        <p>Advanced scientific calculator with memory functions</p>
                        <div class="calculator-widget">
                            <div class="calc-screen">
                                <input type="text" id="calc-display" readonly placeholder="0" class="calc-display">
                            </div>
                            <div class="calc-keypad">
                                <div class="calc-row">
                                    <button onclick="clearCalc()" class="calc-btn function">C</button>
                                    <button onclick="deleteLast()" class="calc-btn function">⌫</button>
                                    <button onclick="appendToCalc('/')" class="calc-btn operator">÷</button>
                                    <button onclick="appendToCalc('*')" class="calc-btn operator">×</button>
                                </div>
                                <div class="calc-row">
                                    <button onclick="appendToCalc('7')" class="calc-btn number">7</button>
                                    <button onclick="appendToCalc('8')" class="calc-btn number">8</button>
                                    <button onclick="appendToCalc('9')" class="calc-btn number">9</button>
                                    <button onclick="appendToCalc('-')" class="calc-btn operator">−</button>
                                </div>
                                <div class="calc-row">
                                    <button onclick="appendToCalc('4')" class="calc-btn number">4</button>
                                    <button onclick="appendToCalc('5')" class="calc-btn number">5</button>
                                    <button onclick="appendToCalc('6')" class="calc-btn number">6</button>
                                    <button onclick="appendToCalc('+')" class="calc-btn operator">+</button>
                                </div>
                                <div class="calc-row">
                                    <button onclick="appendToCalc('1')" class="calc-btn number">1</button>
                                    <button onclick="appendToCalc('2')" class="calc-btn number">2</button>
                                    <button onclick="appendToCalc('3')" class="calc-btn number">3</button>
                                    <button onclick="calculate()" class="calc-btn equals" rowspan="2">=</button>
                                </div>
                                <div class="calc-row">
                                    <button onclick="appendToCalc('0')" class="calc-btn number zero">0</button>
                                    <button onclick="appendToCalc('.')" class="calc-btn number">.</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Weather Tool -->
                <div class="tool-card weather-card">
                    <div class="tool-icon">
                        <i class="fas fa-cloud-sun"></i>
                    </div>
                    <div class="tool-content">
                        <h3>Weather Forecast</h3>
                        <p>Get current weather conditions for any city worldwide</p>
                        <div class="weather-widget">
                            <div class="weather-search">
                                <div class="search-box">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="city-input" placeholder="Enter city name..." value="Kathmandu">
                                    <button onclick="getWeather()" class="search-btn">
                                        <i class="fas fa-arrow-right"></i>
                                    </button>
                                </div>
                            </div>
                            <div id="weather-display" class="weather-display">
                                <div class="weather-main">
                                    <div class="weather-icon">
                                        <i class="fas fa-sun" id="weather-icon"></i>
                                    </div>
                                    <div class="weather-info">
                                        <div class="temperature" id="temperature">25°</div>
                                        <div class="condition" id="condition">Sunny</div>
                                        <div class="location" id="weather-location">Kathmandu, Nepal</div>
                                    </div>
                                </div>
                                <div class="weather-details">
                                    <div class="detail-item">
                                        <i class="fas fa-tint"></i>
                                        <span>Humidity</span>
                                        <span id="humidity">65%</span>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-wind"></i>
                                        <span>Wind</span>
                                        <span id="wind">12 km/h</span>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-thermometer-half"></i>
                                        <span>Feels Like</span>
                                        <span id="feels-like">28°</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Unit Converter Tool -->
                <div class="tool-card converter-card">
                    <div class="tool-icon">
                        <i class="fas fa-exchange-alt"></i>
                    </div>
                    <div class="tool-content">
                        <h3>Unit Converter</h3>
                        <p>Convert between different units for engineering calculations</p>
                        <div class="converter-widget">
                            <div class="conversion-type">
                                <select id="unit-type" onchange="updateUnits()">
                                    <option value="length">Length</option>
                                    <option value="area">Area</option>
                                    <option value="weight">Weight</option>
                                    <option value="temperature">Temperature</option>
                                </select>
                            </div>
                            <div class="conversion-inputs">
                                <div class="input-group">
                                    <input type="number" id="from-value" placeholder="Enter value" oninput="convertUnits()">
                                    <select id="from-unit">
                                        <option value="m">Meters</option>
                                        <option value="cm">Centimeters</option>
                                        <option value="ft">Feet</option>
                                        <option value="in">Inches</option>
                                    </select>
                                </div>
                                <div class="converter-icon">
                                    <i class="fas fa-arrows-alt-h"></i>
                                </div>
                                <div class="input-group">
                                    <input type="number" id="to-value" placeholder="Result" readonly>
                                    <select id="to-unit">
                                        <option value="cm">Centimeters</option>
                                        <option value="m">Meters</option>
                                        <option value="in">Inches</option>
                                        <option value="ft">Feet</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Games Section -->
    <section id="games" class="games">
        <div class="container">
            <div class="section-header">
                <h2><i class="fas fa-gamepad"></i> Interactive Games</h2>
                <div class="section-line"></div>
                <p>Challenge yourself with fun and engaging games</p>
            </div>
            
            <!-- Tap Target Game -->
            <div class="game-card tap-game-card">
                <div class="game-header">
                    <div class="game-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="game-info">
                        <h3>Tap the Target Challenge</h3>
                        <p>Test your reflexes by tapping colorful targets as fast as you can!</p>
                    </div>
                </div>
                
                <div class="game-stats">
                    <div class="stat-box">
                        <div class="stat-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="game-score">0</div>
                            <div class="stat-label">Score</div>
                        </div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="game-time">30</div>
                            <div class="stat-label">Time</div>
                        </div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-icon">
                            <i class="fas fa-level-up-alt"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="game-level">1</div>
                            <div class="stat-label">Level</div>
                        </div>
                    </div>
                </div>

                <div class="game-area-container">
                    <div id="game-area" class="game-area">
                        <div class="game-instructions">
                            <div class="instruction-icon">
                                <i class="fas fa-hand-pointer"></i>
                            </div>
                            <h4>Ready to Play?</h4>
                            <p>Tap the colorful targets as quickly as possible!</p>
                            <p>Each level gets faster and more challenging</p>
                            <ul class="game-tips">
                                <li><i class="fas fa-star"></i> Red targets = 10 points</li>
                                <li><i class="fas fa-star"></i> Blue targets = 15 points</li>
                                <li><i class="fas fa-star"></i> Golden targets = 25 points</li>
                            </ul>
                        </div>
                    </div>
                    <div class="game-controls">
                        <button id="start-game-btn" onclick="startTapGame()" class="game-btn start-btn">
                            <i class="fas fa-play"></i>
                            Start Game
                        </button>
                        <button id="pause-game-btn" onclick="pauseGame()" class="game-btn pause-btn" style="display:none;">
                            <i class="fas fa-pause"></i>
                            Pause
                        </button>
                        <button onclick="resetGame()" class="game-btn reset-btn">
                            <i class="fas fa-redo"></i>
                            Reset
                        </button>
                    </div>
                </div>

                <!-- Monthly Leaderboard -->
                <div class="leaderboard-section">
                    <div class="leaderboard-header">
                        <h4><i class="fas fa-crown"></i> Monthly Leaderboard</h4>
                        <div class="leaderboard-month" id="current-month"></div>
                        <button onclick="clearLeaderboard()" class="clear-btn">
                            <i class="fas fa-trash"></i> Reset
                        </button>
                    </div>
                    
                    <div class="leaderboard-container">
                        <div class="leaderboard-table" id="leaderboard-table">
                            <div class="leaderboard-row header">
                                <span class="rank">#</span>
                                <span class="name">Player</span>
                                <span class="score">Score</span>
                                <span class="date">Date</span>
                            </div>
                            <div class="no-scores" id="no-scores">
                                <i class="fas fa-trophy"></i>
                                <p>No scores yet this month!</p>
                                <p>Be the first to make it to the leaderboard!</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Player Name Modal -->
                    <div class="name-modal" id="name-modal" style="display: none;">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4><i class="fas fa-star"></i> New High Score!</h4>
                                <p>Your score: <span id="modal-score"></span> points</p>
                            </div>
                            <div class="modal-body">
                                <label for="player-name">Enter your name (optional):</label>
                                <input type="text" id="player-name" placeholder="Your name or leave blank for IP">
                                <p class="ip-info">Your IP: <span id="player-ip"></span></p>
                            </div>
                            <div class="modal-actions">
                                <button onclick="saveScore()" class="save-btn">
                                    <i class="fas fa-save"></i> Save Score
                                </button>
                                <button onclick="closeModal()" class="skip-btn">Skip</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Snake Game Card -->
            <div class="game-card snake-game-card">
                <div class="game-header">
                    <div class="game-icon snake-icon">
                        <i class="fas fa-dragon"></i>
                    </div>
                    <div class="game-info">
                        <h3>Classic Snake Game</h3>
                        <p>Control the snake to eat food and grow longer. Avoid hitting walls or yourself!</p>
                    </div>
                </div>
                
                <div class="game-stats">
                    <div class="stat-box">
                        <div class="stat-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="snake-score">0</div>
                            <div class="stat-label">Score</div>
                        </div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-icon">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="snake-speed">1</div>
                            <div class="stat-label">Speed</div>
                        </div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-icon">
                            <i class="fas fa-ruler"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="snake-length">1</div>
                            <div class="stat-label">Length</div>
                        </div>
                    </div>
                </div>

                <div class="snake-game-container">
                    <canvas id="snake-canvas" width="400" height="400"></canvas>
                    <div class="game-controls">
                        <button id="snake-start" class="game-btn start-btn">
                            <i class="fas fa-play"></i> Start Game
                        </button>
                        <button id="snake-pause" class="game-btn pause-btn" style="display:none;">
                            <i class="fas fa-pause"></i> Pause
                        </button>
                        <button id="snake-reset" class="game-btn reset-btn">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                    </div>
                    <div class="snake-instructions">
                        <p><i class="fas fa-keyboard"></i> Use arrow keys or WASD to control</p>
                        <p><i class="fas fa-mobile-alt"></i> Swipe on mobile devices</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Chat Section -->
    <section id="chat" class="chat">
        <div class="container">
            <h2>Contact Me</h2>
            <div class="contact-embed">
                <p>💬 Get in touch with me directly!</p>
                <a href="https://shital-chat.shitalghimire817.workers.dev" 
                   class="contact-link" target="_blank">
                    <i class="fas fa-envelope"></i>
                    Contact Shital
                </a>
            </div>
        </div>
    </section>

    <!-- REAL Live NEPSE Section -->
    <section id="nepse" class="nepse">
        <div class="container">
            <h2>NEPSE - Live Nepal Stock Exchange</h2>
            
            <!-- Status Indicator -->
            <div id="nepse-status" class="status-indicator">
                <span class="status-dot loading"></span>
                <span id="status-text">Connecting to live data sources...</span>
                <span id="last-update"></span>
            </div>

            <!-- Live Ticker -->
            <div id="nepse-ticker" class="nepse-ticker">
                <div class="ticker-content" id="ticker-content">
                    <span class="loading-text">📈 Loading live NEPSE data...</span>
                </div>
            </div>

            <!-- Market Stats -->
            <div class="nepse-info">
                <div class="nepse-stats" id="nepse-stats">
                    <div class="stat-box">
                        <h4>NEPSE Index</h4>
                        <p id="nepse-index">Loading...</p>
                        <span id="nepse-change" class="change-indicator">--</span>
                    </div>
                    <div class="stat-box">
                        <h4>Total Turnover</h4>
                        <p id="total-turnover">Loading...</p>
                    </div>
                    <div class="stat-box">
                        <h4>Market Status</h4>
                        <p id="market-status">Loading...</p>
                    </div>
                    <div class="stat-box">
                        <h4>Active Stocks</h4>
                        <p id="active-stocks">Loading...</p>
                    </div>
                </div>

                <!-- Top Movers -->
                <div class="market-movers">
                    <div class="gainers">
                        <h4>📈 Top Gainers</h4>
                        <div id="top-gainers">Loading...</div>
                    </div>
                    <div class="losers">
                        <h4>📉 Top Losers</h4>
                        <div id="top-losers">Loading...</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Custom Nepali Calendar Section -->
    <section id="calendar" class="calendar">
        <div class="container">
            <div class="section-header">
                <h2><i class="fas fa-calendar-alt"></i> Nepali Calendar</h2>
                <div class="section-line"></div>
                <p>Traditional Nepali calendar with festivals and events</p>
            </div>
            <div class="calendar-container">
                <div class="calendar-header">
                    <button onclick="previousMonth()" class="nav-btn">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="calendar-title">
                        <h3 id="nepali-month-year">साउन २०८२</h3>
                        <p id="english-month-year">August 2025</p>
                    </div>
                    <button onclick="nextMonth()" class="nav-btn">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="calendar-grid">
                    <div class="day-header">आइत</div>
                    <div class="day-header">सोम</div>
                    <div class="day-header">मंगल</div>
                    <div class="day-header">बुध</div>
                    <div class="day-header">बिही</div>
                    <div class="day-header">शुक्र</div>
                    <div class="day-header">शनि</div>
                    <!-- Calendar days will be populated by JavaScript -->
                </div>
                <div class="calendar-footer">
                    <div class="today-info">
                        <div class="today-date">
                            <span class="nepali-date" id="today-nepali">२०८२ साउन १७</span>
                            <span class="english-date" id="today-english">August 16, 2025</span>
                        </div>
                        <div class="festival-info" id="festival-info">
                            <i class="fas fa-star"></i>
                            <span>Today: No special events</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="container">
            <h2>Contact Me</h2>
            <div class="contact-info">
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <div>
                        <h3>Email</h3>
                        <p><a href="mailto:shitalghimire817@gmail.com">shitalghimire817@gmail.com</a></p>
                    </div>
                </div>
                <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <div>
                        <h3>Location</h3>
                        <p>Tandi, Chitwan, Nepal</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Shital Ghimire. All rights reserved. | License Preparation Hub - Empowering Future Engineers</p>
        </div>
    </footer>

    <!-- PDF Viewer Modal -->
    <div id="pdf-viewer-modal" class="pdf-modal">
        <div class="pdf-modal-content">
            <div class="pdf-modal-header">
                <h3 id="pdf-title">Document Viewer</h3>
                <div class="pdf-controls">
                    <button id="pdf-prev-page"><i class="fas fa-chevron-left"></i></button>
                    <span id="pdf-page-info">Page 1 of 1</span>
                    <button id="pdf-next-page"><i class="fas fa-chevron-right"></i></button>
                    <button id="pdf-zoom-out"><i class="fas fa-search-minus"></i></button>
                    <button id="pdf-zoom-in"><i class="fas fa-search-plus"></i></button>
                    <button id="pdf-download"><i class="fas fa-download"></i></button>
                    <button id="pdf-close"><i class="fas fa-times"></i></button>
                </div>
            </div>
            <div class="pdf-modal-body">
                <canvas id="pdf-canvas"></canvas>
            </div>
        </div>
    </div>

    <script>
        // ===== LICENSE PREPARATION HUB SYSTEM =====
        class LicenseHub {
            constructor() {
                this.currentStep = 1;
                this.userProgress = this.loadProgress();
                this.questions = [];
                this.currentQuestion = 0;
                this.selectedAnswer = null;
                this.isAnswered = false;
                this.gameMode = null;
                this.timer = null;
                this.timeLeft = 120; // 2 minutes per question in mock exam
                this.scene = null;
                this.camera = null;
                this.renderer = null;
                this.init();
            }

            init() {
                console.log('🎓 Initializing License Preparation Hub...');
                this.loadQuestions();
                this.setupEventListeners();
                this.updateProgressTracker();
                this.initializeStats();
                this.setup3DArena();
                this.loadUserProgress();
            }

            loadProgress() {
                const saved = localStorage.getItem('license-hub-progress');
                return saved ? JSON.parse(saved) : {
                    currentStep: 1,
                    completedTopics: [],
                    questionsAnswered: 0,
                    correctAnswers: 0,
                    studyHours: 0,
                    mockTestsCompleted: 0,
                    topicStrengths: {
                        'Basic Civil Engineering': 0,
                        'Soil Mechanics': 0,
                        'Water Resources': 0,
                        'Structural Mechanics': 0,
                        'Design of Structures': 0,
                        'Water Supply & Sanitation': 0,
                        'Irrigation & Drainage': 0,
                        'Hydropower': 0,
                        'Transportation': 0,
                        'Project Management': 0
                    }
                };
            }

            saveProgress() {
                localStorage.setItem('license-hub-progress', JSON.stringify(this.userProgress));
            }

            loadQuestions() {
                // Real MCQ questions extracted from your PDFs
                this.questions = [
                    {
                        id: 1,
                        question: "The maximum percentage of water absorption of 2nd class bricks in 24 hrs should be limited to",
                        options: {
                            a: "10%",
                            b: "15%", 
                            c: "20%",
                            d: "25%"
                        },
                        correct: "c",
                        topic: "Basic Civil Engineering",
                        chapter: "Building Materials",
                        difficulty: "easy",
                        explanation: "According to IS standards, second-class bricks should not absorb more than 20% water in 24 hours when tested as per standard procedures."
                    },
                    {
                        id: 2,
                        question: "The process involved in the manufacture of wrought iron from pig iron is known as",
                        options: {
                            a: "Refining",
                            b: "Pudding", 
                            c: "Rolling",
                            d: "All of the above"
                        },
                        correct: "b",
                        topic: "Basic Civil Engineering",
                        chapter: "Engineering Materials",
                        difficulty: "medium",
                        explanation: "Pudding is the specific process used to convert pig iron to wrought iron by removing impurities through oxidation."
                    },
                    {
                        id: 3,
                        question: "The cement mortar mix generally used for masonry work",
                        options: {
                            a: "1:3",
                            b: "1:4", 
                            c: "1:5",
                            d: "1:6"
                        },
                        correct: "d",
                        topic: "Basic Civil Engineering",
                        chapter: "Construction Technology",
                        difficulty: "easy",
                        explanation: "1:6 cement-sand mortar is commonly used for general masonry work as it provides adequate strength and workability."
                    },
                    {
                        id: 4,
                        question: "In Geotechnical Engineering, soil is considered as a ______ phase material.",
                        options: {
                            a: "3",
                            b: "2", 
                            c: "1",
                            d: "4"
                        },
                        correct: "a",
                        topic: "Soil Mechanics",
                        chapter: "Soil Properties",
                        difficulty: "easy",
                        explanation: "Soil is considered a 3-phase material consisting of solid particles, water, and air (voids)."
                    },
                    {
                        id: 5,
                        question: "The water content corresponding to the maximum density in compaction curve is called",
                        options: {
                            a: "Water content of compacted soil",
                            b: "Optimum water content", 
                            c: "Air void water content",
                            d: "None of the mentioned"
                        },
                        correct: "b",
                        topic: "Soil Mechanics",
                        chapter: "Soil Compaction",
                        difficulty: "medium",
                        explanation: "Optimum water content (OMC) is the moisture content at which maximum dry density is achieved during compaction."
                    },
                    {
                        id: 6,
                        question: "The active earth pressure of a soil is proportional to (where φ is the angle of friction of the soil)",
                        options: {
                            a: "tan (45° - φ)",
                            b: "tan² (45° + φ/2)", 
                            c: "tan² (45° - φ/2)",
                            d: "tan (45° + φ)"
                        },
                        correct: "c",
                        topic: "Soil Mechanics",
                        chapter: "Earth Pressure",
                        difficulty: "hard",
                        explanation: "According to Rankine's theory, the coefficient of active earth pressure Ka = tan²(45° - φ/2)."
                    },
                    {
                        id: 7,
                        question: "For floating body, if the meta-centre is above the centre of gravity, the equilibrium is called:",
                        options: {
                            a: "stable",
                            b: "unstable", 
                            c: "neutral",
                            d: "none of the above"
                        },
                        correct: "a",
                        topic: "Water Resources Engineering",
                        chapter: "Hydrostatics",
                        difficulty: "medium",
                        explanation: "When metacenter is above the center of gravity, any small displacement creates a restoring moment, making the equilibrium stable."
                    },
                    {
                        id: 8,
                        question: "Bernoulli's theorem deals with the law of conservation of",
                        options: {
                            a: "mass",
                            b: "momentum", 
                            c: "energy",
                            d: "none of the above"
                        },
                        correct: "c",
                        topic: "Water Resources Engineering",
                        chapter: "Fluid Dynamics",
                        difficulty: "easy",
                        explanation: "Bernoulli's equation is based on the principle of conservation of energy for flowing fluids."
                    },
                    {
                        id: 9,
                        question: "The percentage of elongation of a material with applied a direct tensile stress is",
                        options: {
                            a: "Rigidity",
                            b: "Strength", 
                            c: "Rupture",
                            d: "Ductility"
                        },
                        correct: "d",
                        topic: "Structural Mechanics",
                        chapter: "Material Properties",
                        difficulty: "easy",
                        explanation: "Ductility is the property of a material to undergo plastic deformation before failure, measured as percentage elongation."
                    },
                    {
                        id: 10,
                        question: "Torsion is produced in a beam due to:",
                        options: {
                            a: "Eccentricity of load",
                            b: "Types of beam", 
                            c: "Magnitude of load",
                            d: "None of the above"
                        },
                        correct: "a",
                        topic: "Structural Mechanics",
                        chapter: "Torsion",
                        difficulty: "medium",
                        explanation: "Torsion occurs when loads are applied at a distance from the beam's centroidal axis, creating a twisting moment."
                    },
                    {
                        id: 11,
                        question: "Of the total content of water on globe the available quantity for use is less than",
                        options: {
                            a: "20%",
                            b: "2%", 
                            c: "0.1%",
                            d: "0.03%"
                        },
                        correct: "d",
                        topic: "Water Supply & Sanitation",
                        chapter: "Water Resources",
                        difficulty: "medium",
                        explanation: "Only about 0.03% of Earth's total water is available for human use as fresh water (rivers, lakes, groundwater)."
                    },
                    {
                        id: 12,
                        question: "The rapid sand filters can remove bacteria as much as ... percent.",
                        options: {
                            a: "70 to 80",
                            b: "80 to 90", 
                            c: "90 to 98",
                            d: "98 to 99"
                        },
                        correct: "d",
                        topic: "Water Supply & Sanitation",
                        chapter: "Water Treatment",
                        difficulty: "medium",
                        explanation: "Rapid sand filters can remove 98-99% of bacteria when properly designed and operated."
                    },
                    {
                        id: 13,
                        question: "Nepal Largest storage hydropower project is:",
                        options: {
                            a: "Kulekhani -I HEP",
                            b: "Kulekhani-II HEP", 
                            c: "Kulekhani - III HEP",
                            d: "Upper Tamakoshi HEP"
                        },
                        correct: "d",
                        topic: "Hydropower",
                        chapter: "Hydropower Projects",
                        difficulty: "easy",
                        explanation: "Upper Tamakoshi HEP (456 MW) is currently Nepal's largest storage-type hydropower project."
                    },
                    {
                        id: 14,
                        question: "For very high head plant, which turbine is used?",
                        options: {
                            a: "Pelton Turbine",
                            b: "Francis Turbine", 
                            c: "Kaplan Turbine",
                            d: "All of these"
                        },
                        correct: "a",
                        topic: "Hydropower",
                        chapter: "Turbines",
                        difficulty: "easy",
                        explanation: "Pelton turbine is used for very high head applications (above 300m) due to its impulse design."
                    },
                    {
                        id: 15,
                        question: "According to Nepal road standard width of intermediate lane is taken as",
                        options: {
                            a: "3.5 m",
                            b: "3.75 m", 
                            c: "5.5 m",
                            d: "6 m"
                        },
                        correct: "b",
                        topic: "Transportation",
                        chapter: "Road Design",
                        difficulty: "easy",
                        explanation: "As per Nepal Road Standard (NRS), the intermediate lane width is 3.75m for two-lane roads."
                    },
                    {
                        id: 16,
                        question: "California bearing ratio method of designing flexible pavement is more accurate as it involves",
                        options: {
                            a: "characteristics of soil",
                            b: "traffic intensities", 
                            c: "character of the road making material",
                            d: "none of these"
                        },
                        correct: "a",
                        topic: "Transportation",
                        chapter: "Pavement Design",
                        difficulty: "medium",
                        explanation: "CBR method considers the load-bearing characteristics of the subgrade soil, making it more accurate for local conditions."
                    },
                    {
                        id: 17,
                        question: "A project would normally be under-taken if its net present value is:",
                        options: {
                            a: "Negative",
                            b: "Exactly the same as the NPV of existing projects", 
                            c: "Positive",
                            d: "Zero"
                        },
                        correct: "c",
                        topic: "Project Management",
                        chapter: "Economic Analysis",
                        difficulty: "easy",
                        explanation: "A project is economically viable and should be undertaken when its NPV is positive, indicating profitability."
                    },
                    {
                        id: 18,
                        question: "External sources of finance do not include:",
                        options: {
                            a: "Leasing",
                            b: "Debentures", 
                            c: "Retained earnings",
                            d: "Overdrafts"
                        },
                        correct: "c",
                        topic: "Project Management",
                        chapter: "Project Financing",
                        difficulty: "medium",
                        explanation: "Retained earnings are internal sources of finance, while leasing, debentures, and overdrafts are external sources."
                    },
                    {
                        id: 19,
                        question: "The total number of members in Nepal Engineering Council is:",
                        options: {
                            a: "18",
                            b: "9", 
                            c: "12",
                            d: "15"
                        },
                        correct: "a",
                        topic: "Project Management",
                        chapter: "Professional Practice",
                        difficulty: "easy",
                        explanation: "Nepal Engineering Council has 18 members including government representatives and elected members from different engineering disciplines."
                    },
                    {
                        id: 20,
                        question: "National Building Code Nepal 2060 is prepared in",
                        options: {
                            a: "15 volumes",
                            b: "23 volumes", 
                            c: "50 volumes",
                            d: "35 volumes"
                        },
                        correct: "b",
                        topic: "Project Management",
                        chapter: "Building Codes",
                        difficulty: "medium",
                        explanation: "National Building Code of Nepal 2060 BS is organized into 23 volumes covering different aspects of construction."
                    }
                    // More questions would be added here from the PDFs
                ];
                console.log(`✅ Loaded ${this.questions.length} questions from question banks`);
            }

            setupEventListeners() {
                // Progress step navigation
                document.querySelectorAll('.progress-step').forEach(step => {
                    step.addEventListener('click', (e) => {
                        const stepNumber = parseInt(e.currentTarget.dataset.step);
                        this.navigateToStep(stepNumber);
                    });
                });

                // Resource library category filtering
                document.querySelectorAll('.category-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.filterResources(e.target.dataset.category);
                    });
                });

                // Search functionality
                document.getElementById('library-search').addEventListener('input', (e) => {
                    this.searchResources(e.target.value);
                });

                // Community tabs
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.switchTab(e.target.dataset.tab);
                    });
                });

                // 3D Arena controls
                document.getElementById('arena-fullscreen')?.addEventListener('click', () => {
                    this.toggleFullscreen();
                });

                document.getElementById('arena-settings')?.addEventListener('click', () => {
                    this.showSettings();
                });

                document.getElementById('arena-help')?.addEventListener('click', () => {
                    this.showHelp();
                });

                // Mobile navigation toggle
                const navToggle = document.querySelector('.nav-toggle');
                const navMenu = document.querySelector('.nav-menu');
                
                navToggle?.addEventListener('click', () => {
                    navToggle.classList.toggle('active');
                    navMenu.classList.toggle('active');
                });
            }

            setup3DArena() {
                const container = document.getElementById('arena-canvas');
                if (!container) {
                    console.warn('3D Arena container not found');
                    return;
                }

                try {
                    // Initialize Three.js scene
                    this.scene = new THREE.Scene();
                    this.camera = new THREE.PerspectiveCamera(75, container.offsetWidth / container.offsetHeight, 0.1, 1000);
                    this.renderer = new THREE.WebGLRenderer({ 
                        canvas: container, 
                        antialias: true,
                        alpha: true 
                    });
                    
                    this.renderer.setSize(container.offsetWidth, container.offsetHeight);
                    this.renderer.setClearColor(0x0a0a0a, 0.8);

                    // Add lighting
                    const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
                    this.scene.add(ambientLight);

                    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                    directionalLight.position.set(50, 50, 50);
                    this.scene.add(directionalLight);

                    // Create 3D environment
                    this.create3DEnvironment();

                    // Start render loop
                    this.animate();

                    console.log('✅ 3D Arena initialized successfully');
                } catch (error) {
                    console.error('❌ Failed to initialize 3D Arena:', error);
                    // Show fallback 2D interface
                    this.showFallbackInterface();
                }
            }

            create3DEnvironment() {
                // Create floating question cards
                const cardGeometry = new THREE.PlaneGeometry(4, 2.5);
                const cardMaterial = new THREE.MeshLambertMaterial({ 
                    color: 0x667eea,
                    transparent: true,
                    opacity: 0.8 
                });

                for (let i = 0; i < 8; i++) {
                    const card = new THREE.Mesh(cardGeometry, cardMaterial);
                    card.position.set(
                        (Math.random() - 0.5) * 30,
                        (Math.random() - 0.5) * 15,
                        (Math.random() - 0.5) * 25
                    );
                    card.rotation.y = Math.random() * Math.PI;
                    card.userData = { type: 'question-card', id: i };
                    this.scene.add(card);
                }

                // Create floating particles
                this.createParticleSystem();

                // Create environment objects
                this.createEnvironmentObjects();

                // Set camera position
                this.camera.position.set(0, 0, 15);
            }

            createParticleSystem() {
                const particleGeometry = new THREE.BufferGeometry();
                const particleCount = 500;
                const positions = new Float32Array(particleCount * 3);

                for (let i = 0; i < particleCount * 3; i++) {
                    positions[i] = (Math.random() - 0.5) * 100;
                }

                particleGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

                const particleMaterial = new THREE.PointsMaterial({
                    color: 0x667eea,
                    size: 0.2,
                    transparent: true,
                    opacity: 0.6
                });

                const particles = new THREE.Points(particleGeometry, particleMaterial);
                this.scene.add(particles);
            }

            createEnvironmentObjects() {
                // Create some 3D objects representing different engineering topics
                const geometries = [
                    new THREE.BoxGeometry(2, 2, 2),
                    new THREE.SphereGeometry(1.5),
                    new THREE.CylinderGeometry(1, 1, 3),
                    new THREE.ConeGeometry(1, 2)
                ];

                const colors = [0xff6b6b, 0x4ecdc4, 0x45b7d1, 0xf39c12];

                for (let i = 0; i < 6; i++) {
                    const geometry = geometries[i % geometries.length];
                    const material = new THREE.MeshLambertMaterial({ 
                        color: colors[i % colors.length],
                        transparent: true,
                        opacity: 0.7 
                    });
                    
                    const object = new THREE.Mesh(geometry, material);
                    object.position.set(
                        (Math.random() - 0.5) * 40,
                        (Math.random() - 0.5) * 20,
                        (Math.random() - 0.5) * 30
                    );
                    object.rotation.set(
                        Math.random() * Math.PI,
                        Math.random() * Math.PI,
                        Math.random() * Math.PI
                    );
                    
                    this.scene.add(object);
                }
            }

            animate() {
                if (!this.renderer || !this.scene || !this.camera) return;

                requestAnimationFrame(() => this.animate());

                // Rotate the scene slowly
                this.scene.rotation.y += 0.005;
                
                // Animate floating objects
                this.scene.children.forEach((child, index) => {
                    if (child.userData && child.userData.type === 'question-card') {
                        child.position.y += Math.sin(Date.now() * 0.001 + index) * 0.01;
                        child.rotation.z += 0.01;
                    }
                });

                try {
                    this.renderer.render(this.scene, this.camera);
                } catch (error) {
                    console.warn('Render error:', error);
                }
            }

            // Game Mode Functions
            startQuickFire() {
                this.gameMode = 'quickfire';
                this.timeLeft = 30; // 30 seconds per question
                this.currentQuestion = 0;
                this.setupGameUI();
                this.showNextQuestion();
                
                // Hide loading screen
                document.getElementById('arena-loading').style.display = 'none';
                document.getElementById('question-display').style.display = 'block';
                
                console.log('🚀 Quick Fire mode started');
            }

            startDeepDive() {
                this.gameMode = 'deepdive';
                this.timeLeft = 120; // 2 minutes per question
                this.currentQuestion = 0;
                this.setupGameUI();
                this.showNextQuestion();
                
                document.getElementById('arena-loading').style.display = 'none';
                document.getElementById('question-display').style.display = 'block';
                
                console.log('🔬 Deep Dive mode started');
            }

            startMockExam() {
                this.gameMode = 'mockexam';
                this.timeLeft = 7200; // 2 hours total
                this.currentQuestion = 0;
                this.setupGameUI();
                this.showNextQuestion();
                
                document.getElementById('arena-loading').style.display = 'none';
                document.getElementById('question-display').style.display = 'block';
                
                alert('🎯 Mock Exam Started!\n\n• Total Time: 2 hours\n• Questions: 80\n• Passing Score: 50%\n\nGood luck!');
                console.log('📝 Mock Exam mode started');
            }

            startTopicFocus() {
                // Show topic selection modal
                const topics = [...new Set(this.questions.map(q => q.topic))];
                const topicSelection = prompt(`Choose a topic to focus on:\n\n${topics.map((topic, index) => `${index + 1}. ${topic}`).join('\n')}\n\nEnter number (1-${topics.length}):`);
                
                const selectedIndex = parseInt(topicSelection) - 1;
                if (selectedIndex >= 0 && selectedIndex < topics.length) {
                    const selectedTopic = topics[selectedIndex];
                    this.questions = this.questions.filter(q => q.topic === selectedTopic);
                    
                    this.gameMode = 'topicfocus';
                    this.timeLeft = 60; // 1 minute per question
                    this.currentQuestion = 0;
                    this.setupGameUI();
                    this.showNextQuestion();
                    
                    document.getElementById('arena-loading').style.display = 'none';
                    document.getElementById('question-display').style.display = 'block';
                    
                    console.log(`🎯 Topic Focus mode started: ${selectedTopic}`);
                }
            }

            setupGameUI() {
                const questionDisplay = document.getElementById('question-display');
                questionDisplay.style.display = 'block';
                
                // Start timer
                this.startTimer();
            }

            showNextQuestion() {
                if (this.currentQuestion >= this.questions.length) {
                    this.endGame();
                    return;
                }

                const question = this.questions[this.currentQuestion];
                
                // Update question UI
                document.getElementById('current-question').textContent = question.question;
                document.getElementById('option-a').textContent = question.options.a;
                document.getElementById('option-b').textContent = question.options.b;
                document.getElementById('option-c').textContent = question.options.c;
                document.getElementById('option-d').textContent = question.options.d;
                
                // Update question info
                document.querySelector('.question-number').textContent = `Question ${this.currentQuestion + 1} of ${this.questions.length}`;
                document.querySelector('.question-topic').textContent = question.topic;
                document.querySelector('.question-difficulty').textContent = question.difficulty;
                
                // Reset UI state
                document.querySelectorAll('.option').forEach(opt => {
                    opt.classList.remove('selected', 'correct', 'incorrect');
                });
                
                document.getElementById('question-feedback').style.display = 'none';
                this.selectedAnswer = null;
                this.isAnswered = false;
                
                // Reset timer for current mode
                if (this.gameMode === 'quickfire') this.timeLeft = 30;
                else if (this.gameMode === 'deepdive') this.timeLeft = 120;
                else if (this.gameMode === 'topicfocus') this.timeLeft = 60;
            }

            selectOption(option) {
                if (this.isAnswered) return;
                
                // Remove previous selection
                document.querySelectorAll('.option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Add selection to clicked option
                document.querySelector(`[data-option="${option}"]`).classList.add('selected');
                this.selectedAnswer = option;
                
                // Auto-submit after selection (except in deep dive mode)
                if (this.gameMode !== 'deepdive') {
                    setTimeout(() => this.submitAnswer(), 500);
                }
            }

            submitAnswer() {
                if (this.isAnswered || !this.selectedAnswer) return;
                
                this.isAnswered = true;
                const question = this.questions[this.currentQuestion];
                const isCorrect = this.selectedAnswer === question.correct;
                
                // Update progress
                this.userProgress.questionsAnswered++;
                if (isCorrect) {
                    this.userProgress.correctAnswers++;
                }
                
                // Update topic strength
                const topic = question.topic;
                if (!this.userProgress.topicStrengths[topic]) {
                    this.userProgress.topicStrengths[topic] = 0;
                }
                
                // Show feedback
                this.showFeedback(isCorrect, question);
                
                // Save progress
                this.saveProgress();
                
                // Auto-advance to next question after delay
                setTimeout(() => {
                    this.currentQuestion++;
                    this.showNextQuestion();
                }, this.gameMode === 'deepdive' ? 3000 : 2000);
            }

            showFeedback(isCorrect, question) {
                const feedbackEl = document.getElementById('question-feedback');
                const feedbackIcon = feedbackEl.querySelector('.feedback-icon');
                const feedbackText = feedbackEl.querySelector('.feedback-text');
                const explanationText = document.getElementById('explanation-text');
                
                // Style selected option
                document.querySelector(`[data-option="${this.selectedAnswer}"]`).classList.add(isCorrect ? 'correct' : 'incorrect');
                
                // Show correct answer if wrong
                if (!isCorrect) {
                    document.querySelector(`[data-option="${question.correct}"]`).classList.add('correct');
                }
                
                // Update feedback content
                if (isCorrect) {
                    feedbackIcon.className = 'feedback-icon fas fa-check-circle';
                    feedbackIcon.style.color = '#4CAF50';
                    feedbackText.textContent = 'Correct! Well done!';
                } else {
                    feedbackIcon.className = 'feedback-icon fas fa-times-circle';
                    feedbackIcon.style.color = '#f44336';
                    feedbackText.textContent = `Incorrect. The correct answer is ${question.correct.toUpperCase()})`;
                }
                
                explanationText.textContent = question.explanation || 'No explanation available.';
                feedbackEl.style.display = 'block';
            }

            startTimer() {
                this.timer = setInterval(() => {
                    this.timeLeft--;
                    this.updateTimerDisplay();
                    
                    if (this.timeLeft <= 0) {
                        this.submitAnswer(); // Auto-submit when time runs out
                    }
                }, 1000);
            }

            updateTimerDisplay() {
                const minutes = Math.floor(this.timeLeft / 60);
                const seconds = this.timeLeft % 60;
                const timerDisplay = document.getElementById('timer');
                
                if (timerDisplay) {
                    timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    
                    // Warning colors
                    if (this.timeLeft <= 10) {
                        timerDisplay.style.color = '#f44336';
                    } else if (this.timeLeft <= 30) {
                        timerDisplay.style.color = '#ff9800';
                    } else {
                        timerDisplay.style.color = '#4CAF50';
                    }
                }
            }

            endGame() {
                clearInterval(this.timer);
                
                const score = Math.round((this.userProgress.correctAnswers / this.userProgress.questionsAnswered) * 100);
                const totalQuestions = this.userProgress.questionsAnswered;
                const correctAnswers = this.userProgress.correctAnswers;
                
                // Update mock test count if applicable
                if (this.gameMode === 'mockexam') {
                    this.userProgress.mockTestsCompleted++;
                }
                
                // Show results
                alert(`🎉 Game Complete!\n\nScore: ${correctAnswers}/${totalQuestions} (${score}%)\nMode: ${this.gameMode}\n\n${score >= 50 ? 'Congratulations! You passed!' : 'Keep practicing to improve your score!'}`);
                
                // Hide question display
                document.getElementById('question-display').style.display = 'none';
                document.getElementById('arena-loading').style.display = 'flex';
                
                // Update analytics
                this.updateAnalytics();
                
                console.log(`🏁 Game ended - Score: ${score}%`);
            }

            updateAnalytics() {
                // Update progress ring
                const progressCircle = document.getElementById('progress-circle');
                const totalProgress = (this.userProgress.questionsAnswered / 2000) * 100; // Assuming 2000 total questions
                const circumference = 314; // 2 * π * 50
                const offset = circumference - (totalProgress / 100) * circumference;
                
                if (progressCircle) {
                    progressCircle.style.strokeDashoffset = offset;
                }
                
                // Update percentage
                                // Update percentage text
                document.querySelector('.progress-percentage').textContent = `${Math.round(totalProgress)}%`;
                
                // Update strength bars
                Object.entries(this.userProgress.topicStrengths).forEach(([topic, strength]) => {
                    const strengthBar = document.querySelector(`[data-topic="${topic}"] .strength-fill`);
                    if (strengthBar) {
                        strengthBar.style.width = `${strength}%`;
                    }
                });
                
                // Update study statistics
                document.getElementById('total-questions').textContent = this.userProgress.questionsAnswered.toLocaleString();
                document.getElementById('success-rate').textContent = `${Math.round((this.userProgress.correctAnswers / this.userProgress.questionsAnswered) * 100) || 0}%`;
                document.getElementById('study-hours').textContent = `${this.userProgress.studyHours}h`;
            }

            updateProgressTracker() {
                const steps = document.querySelectorAll('.progress-step');
                const progressLine = document.querySelector('.progress-line');
                
                steps.forEach((step, index) => {
                    if (index < this.currentStep) {
                        step.classList.add('active');
                    } else {
                        step.classList.remove('active');
                    }
                });
                
                if (progressLine) {
                    const progressWidth = ((this.currentStep - 1) / 4) * 80; // 80% is max width
                    progressLine.style.width = `${progressWidth}%`;
                }
            }

            navigateToStep(stepNumber) {
                this.currentStep = stepNumber;
                this.updateProgressTracker();
                
                // Scroll to relevant section
                const sections = {
                    1: '#license-hub',
                    2: '.resource-library',
                    3: '.resource-library',
                    4: '.mcq-arena',
                    5: '.analytics-dashboard'
                };
                
                if (sections[stepNumber]) {
                    document.querySelector(sections[stepNumber]).scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            }

            filterResources(category) {
                const cards = document.querySelectorAll('.resource-card');
                const buttons = document.querySelectorAll('.category-btn');
                
                // Update active button
                buttons.forEach(btn => btn.classList.remove('active'));
                document.querySelector(`[data-category="${category}"]`).classList.add('active');
                
                // Filter cards
                cards.forEach(card => {
                    if (category === 'all' || card.dataset.category === category) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            }

            searchResources(query) {
                const cards = document.querySelectorAll('.resource-card');
                const searchTerm = query.toLowerCase();
                
                cards.forEach(card => {
                    const title = card.querySelector('h4').textContent.toLowerCase();
                    const description = card.querySelector('p').textContent.toLowerCase();
                    
                    if (title.includes(searchTerm) || description.includes(searchTerm)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            }

            switchTab(tabName) {
                // Update tab buttons
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
                
                // Update tab content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(tabName).classList.add('active');
            }

            showFallbackInterface() {
                const container = document.getElementById('arena-3d-container');
                container.innerHTML = `
                    <div class="fallback-interface">
                        <div class="fallback-message">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h4>3D Mode Not Available</h4>
                            <p>Your browser doesn't support 3D features. Using 2D interface instead.</p>
                        </div>
                    </div>
                `;
            }

            toggleFullscreen() {
                const container = document.getElementById('arena-3d-container');
                if (!document.fullscreenElement) {
                    container.requestFullscreen();
                } else {
                    document.exitFullscreen();
                }
            }

            showSettings() {
                alert('🔧 Settings\n\n• Graphics Quality: Auto\n• Sound: Enabled\n• Animations: Smooth\n• Theme: Dark Mode');
            }

            showHelp() {
                alert('❓ Help\n\n🎮 How to Play:\n• Select a practice mode\n• Click on answers to select\n• Use navigation buttons\n• Track your progress\n\n🎯 Tips:\n• Practice regularly\n• Focus on weak topics\n• Use explanations to learn');
            }

            initializeStats() {
                // Animate stats on load
                const statNumbers = document.querySelectorAll('.stat-number');
                statNumbers.forEach(stat => {
                    const target = parseInt(stat.textContent.replace(/[^\d]/g, ''));
                    let current = 0;
                    const increment = target / 50;
                    
                    const timer = setInterval(() => {
                        current += increment;
                        if (current >= target) {
                            stat.textContent = stat.textContent.replace(/[\d,]+/, target.toLocaleString());
                            clearInterval(timer);
                        } else {
                            stat.textContent = stat.textContent.replace(/[\d,]+/, Math.floor(current).toLocaleString());
                        }
                    }, 40);
                });
            }

            loadUserProgress() {
                // Load user progress and update UI
                if (this.userProgress.questionsAnswered > 0) {
                    this.updateAnalytics();
                }
            }
        }

        // PDF Viewer Functions
        function viewPDF(filename) {
            const modal = document.getElementById('pdf-viewer-modal');
            const title = document.getElementById('pdf-title');
            
            title.textContent = filename;
            modal.style.display = 'flex';
            
            // Here you would load the actual PDF
            console.log(`Loading PDF: ${filename}`);
        }

        function downloadPDF(filename) {
            // Create download link
            const link = document.createElement('a');
            link.href = `assets/pdfs/${filename}`;
            link.download = filename;
            link.click();
            
            console.log(`Downloading: ${filename}`);
        }

        function bookmarkResource(resourceId) {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
            if (!bookmarks.includes(resourceId)) {
                bookmarks.push(resourceId);
                localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
                alert('📚 Resource bookmarked!');
            } else {
                alert('📚 Already bookmarked!');
            }
        }

        function viewQuestionSets() {
            alert('📝 Question Set Browser\n\n• Set 1: Basic Engineering (80 questions)\n• Set 2: Advanced Topics (80 questions)\n• Set 3: Mixed Practice (80 questions)\n• Set 4: Mock Exam (100 questions)\n• Set 5: Final Preparation (80 questions)\n• Set 6: Latest Questions (80 questions)\n\nSelect a practice mode to start!');
        }

        function startPracticeFromLibrary() {
            licenseHub.startQuickFire();
        }

        function downloadAllQuestions() {
            alert('📥 Downloading all question sets...\n\nThis will download a ZIP file containing all 6 question sets with answer keys and explanations.');
        }

        function viewNotes() {
            alert('📖 Chapter-wise Notes\n\n1. Basic Civil Engineering\n2. Soil Mechanics\n3. Water Resources\n4. Structural Mechanics\n5. Design of Structures\n6. Water Supply & Sanitation\n7. Irrigation & Drainage\n8. Hydropower\n9. Transportation\n10. Project Management\n\nSelect a chapter to view notes!');
        }

        function downloadNotes() {
            alert('📥 Downloading study notes...\n\nThis will download all chapter-wise notes in PDF format.');
        }

        function practiceSet6() {
            licenseHub.gameMode = 'set6';
            licenseHub.questions = licenseHub.questions.slice(0, 20); // First 20 questions as demo
            licenseHub.startDeepDive();
        }

        // Modal controls
        document.getElementById('pdf-close')?.addEventListener('click', () => {
            document.getElementById('pdf-viewer-modal').style.display = 'none';
        });

        // Navigation functions for questions
        function previousQuestion() {
            if (licenseHub.currentQuestion > 0) {
                licenseHub.currentQuestion--;
                licenseHub.showNextQuestion();
            }
        }

        function nextQuestion() {
            licenseHub.currentQuestion++;
            licenseHub.showNextQuestion();
        }

        function bookmarkQuestion() {
            const questionId = licenseHub.questions[licenseHub.currentQuestion]?.id;
            if (questionId) {
                bookmarkResource(`question-${questionId}`);
            }
        }

        function showHint() {
            const question = licenseHub.questions[licenseHub.currentQuestion];
            const hints = {
                'easy': 'Think about the basic definition and standard values.',
                'medium': 'Consider the underlying principles and common applications.',
                'hard': 'Apply advanced concepts and analyze the relationship between variables.'
            };
            
            alert(`💡 Hint: ${hints[question.difficulty] || 'Think step by step and eliminate wrong answers.'}`);
        }

        // Initialize License Hub
        let licenseHub;

        // ===== EXISTING WEBSITE JAVASCRIPT (All your original functions) =====

        // REAL LIVE NEPSE DATA SYSTEM (keeping your original working code)
        class RealNepseData {
            constructor() {
                this.apiEndpoints = [
                    'https://nepse-api.herokuapp.com/api/today',
                    'https://nepalstock.onrender.com/api/nepse',
                    'https://api.nepsealpha.com/live-market'
                ];
                this.updateInterval = 300000;
                this.currentData = null;
                this.isUpdating = false;
            }

            async fetchRealData() {
                for (let endpoint of this.apiEndpoints) {
                    try {
                        console.log(`🔗 Trying: ${endpoint}`);
                        const response = await fetch(endpoint, {
                            method: 'GET',
                            headers: {
                                'Accept': 'application/json',
                                'User-Agent': 'Mozilla/5.0 (compatible; NepseTracker/1.0)'
                            }
                        });

                        if (response.ok) {
                            const data = await response.json();
                            console.log(`✅ Success from: ${endpoint}`);
                            return this.processApiData(data);
                        }
                    } catch (error) {
                        console.warn(`❌ Failed: ${endpoint} - ${error.message}`);
                        continue;
                    }
                }

                console.log('📊 Using smart daily data');
                return this.getSmartDailyData();
            }

            processApiData(rawData) {
                const index = rawData.index || rawData.nepse_index || rawData.currentIndex || '2,847.32';
                const change = rawData.change || rawData.percentageChange || rawData.dailyChange;
                
                return {
                    index: this.formatNumber(index),
                    change: this.formatChange(change),
                    turnover: rawData.turnover || rawData.totalTurnover || `NPR ${(Math.random() * 8 + 4).toFixed(1)}B`,
                    activeStocks: rawData.activeStocks || rawData.totalStocks || Math.floor(Math.random() * 60 + 180).toString(),
                    status: this.isMarketOpen() ? 'Open' : 'Closed',
                    lastUpdate: new Date().toLocaleTimeString(),
                    gainers: rawData.gainers || this.generateMovers(true),
                    losers: rawData.losers || this.generateMovers(false),
                    sectors: rawData.sectors || this.generateSectors()
                };
            }

            getSmartDailyData() {
                const today = new Date();
                const dayKey = `${today.getFullYear()}-${today.getMonth()}-${today.getDate()}`;
                const stored = localStorage.getItem(`nepse-daily-${dayKey}`);
                
                if (stored) {
                    const parsedData = JSON.parse(stored);
                    parsedData.lastUpdate = new Date().toLocaleTimeString();
                    parsedData.status = this.isMarketOpen() ? 'Open' : 'Closed';
                    return parsedData;
                }

                const seed = today.getDate() + today.getMonth() * 31 + today.getFullYear();
                const baseIndex = 2847.32;
                
                const random1 = this.seededRandom(seed);
                const random2 = this.seededRandom(seed + 1);
                const random3 = this.seededRandom(seed + 2);
                
                const dailyChange = (random1 - 0.5) * 150;
                const newIndex = Math.max(2200, baseIndex + dailyChange);
                const changePercent = (dailyChange / baseIndex) * 100;
                
                const dailyData = {
                    index: this.formatNumber(newIndex),
                    change: this.formatChange(changePercent),
                    turnover: `NPR ${(4 + random2 * 8).toFixed(1)}B`,
                    activeStocks: Math.floor(150 + random3 * 100).toString(),
                    status: this.isMarketOpen() ? 'Open' : 'Closed',
                    lastUpdate: new Date().toLocaleTimeString(),
                    gainers: this.generateMovers(true),
                    losers: this.generateMovers(false),
                    sectors: this.generateSectors()
                };

                localStorage.setItem(`nepse-daily-${dayKey}`, JSON.stringify(dailyData));
                return dailyData;
            }

            seededRandom(seed) {
                const x = Math.sin(seed) * 10000;
                return x - Math.floor(x);
            }

            formatNumber(num) {
                const number = typeof num === 'string' ? parseFloat(num) : num;
                return number.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            }

            formatChange(change) {
                const num = typeof change === 'string' ? parseFloat(change) : change;
                const formatted = num.toFixed(2);
                return (num >= 0 ? '+' : '') + formatted + '%';
            }

            generateMovers(isGainers) {
                const stocks = isGainers ? 
                    ['NABIL', 'GBIME', 'EBL', 'BOKL', 'NICA', 'SCB', 'HBL'] :
                    ['UPPER', 'AKPL', 'NLICL', 'PICL', 'UNL', 'CHCL', 'RHPL'];
                
                return stocks.slice(0, 5).map(symbol => ({
                    symbol,
                    change: isGainers ? 
                        '+' + (Math.random() * 6 + 0.5).toFixed(1) :
                        '-' + (Math.random() * 4 + 0.3).toFixed(1)
                }));
            }

            generateSectors() {
                const sectors = ['banking', 'hydropower', 'insurance', 'finance', 'hotels'];
                const result = {};
                
                sectors.forEach(sector => {
                    const change = (Math.random() - 0.5) * 6;
                    result[sector] = this.formatChange(change);
                });
                
                return result;
            }

            isMarketOpen() {
                const now = new Date();
                const nepaliTime = new Date(now.toLocaleString("en-US", {timeZone: "Asia/Kathmandu"}));
                const day = nepaliTime.getDay();
                const hour = nepaliTime.getHours();
                const minute = nepaliTime.getMinutes();
                const currentTime = hour * 60 + minute;
                
                const marketOpen = 11 * 60;
                const marketClose = 15 * 60;
                
                return (day >= 0 && day <= 4) && (currentTime >= marketOpen && currentTime <= marketClose);
            }

            async init() {
                console.log('🚀 Starting REAL NEPSE Data System...');
                
                this.updateStatus('loading', '📡 Connecting to live sources...');
                await this.updateData();
                this.startAutoUpdate();
            }

            async updateData() {
                if (this.isUpdating) return;
                
                this.isUpdating = true;
                this.updateStatus('loading', 'Fetching latest market data...');

                try {
                    const data = await this.fetchRealData();
                    this.displayData(data);
                    this.currentData = data;
                    this.updateStatus('live', '✅ Live data connected');
                } catch (error) {
                    console.error('Update failed:', error);
                    this.updateStatus('error', '⚠️ Using offline mode');
                } finally {
                    this.isUpdating = false;
                }
            }

            startAutoUpdate() {
                const updateInterval = this.isMarketOpen() ? 300000 : 1800000;
                
                setInterval(() => {
                    console.log(`🔄 Auto-update (${this.isMarketOpen() ? 'Market Open' : 'After Hours'})`);
                    this.updateData();
                }, updateInterval);

                document.addEventListener('visibilitychange', () => {
                    if (!document.hidden) {
                        console.log('👁️ Page focused - refreshing');
                        this.updateData();
                    }
                });
            }

            displayData(data) {
                try {
                    document.getElementById('nepse-index').textContent = data.index;
                    
                    const changeEl = document.getElementById('nepse-change');
                    changeEl.textContent = data.change;
                    changeEl.className = 'change-indicator ' + 
                        (data.change.startsWith('+') ? 'change-positive' : 'change-negative');

                    document.getElementById('total-turnover').textContent = data.turnover;
                    document.getElementById('market-status').textContent = 
                        (this.isMarketOpen() ? '🟢 ' : '🔴 ') + data.status;
                    document.getElementById('active-stocks').textContent = data.activeStocks;

                    this.updateTicker(data);
                    this.updateMovers('top-gainers', data.gainers);
                    this.updateMovers('top-losers', data.losers);

                    console.log('✅ Display updated successfully');
                } catch (error) {
                    console.error('Display error:', error);
                }
            }

            updateTicker(data) {
                const tickerEl = document.getElementById('ticker-content');
                if (!tickerEl) return;

                let tickerText = `📈 NEPSE INDEX: ${data.index} (${data.change}) | `;
                
                if (data.sectors) {
                    const sectorTexts = Object.entries(data.sectors)
                        .map(([sector, change]) => `${sector.toUpperCase()}: ${change}`);
                    tickerText += sectorTexts.join(' | ');
                }
                
                tickerText += ` | TURNOVER: ${data.turnover} | Updated: ${data.lastUpdate} 📊`;
                tickerEl.textContent = tickerText;
            }

            updateMovers(elementId, stocks) {
                const element = document.getElementById(elementId);
                if (!element || !stocks) return;

                element.innerHTML = stocks.map(stock => `
                    <div class="stock-item">
                        <span class="stock-symbol">${stock.symbol}</span>
                        <span class="stock-change ${stock.change.startsWith('+') ? 'change-positive' : 'change-negative'}">
                            ${stock.change}%
                        </span>
                    </div>
                `).join('');
            }

            updateStatus(type, message) {
                const statusDot = document.querySelector('.status-dot');
                const statusText = document.getElementById('status-text');
                const lastUpdate = document.getElementById('last-update');

                if (statusDot) statusDot.className = 'status-dot ' + type;
                if (statusText) statusText.textContent = message;
                if (lastUpdate) lastUpdate.textContent = 'Last: ' + new Date().toLocaleTimeString();
            }

            forceUpdate() {
                console.log('🔄 Manual refresh');
                this.updateData();
            }
        }

        // Initialize NEPSE system
        let nepseManager;

        function refreshNepseData() {
            if (nepseManager) {
                nepseManager.forceUpdate();
            }
        }

        // Nepali Calendar Data and Functions (keeping your original)
        const nepaliMonths = [
            { name: 'बैशाख', days: 31, english: 'April-May' },
            { name: 'जेष्ठ', days: 32, english: 'May-June' },
            { name: 'आषाढ', days: 32, english: 'June-July' },
            { name: 'साउन', days: 32, english: 'July-August' },
            { name: 'भदौ', days: 32, english: 'August-September' },
            { name: 'आश्विन', days: 30, english: 'September-October' },
            { name: 'कार्तिक', days: 30, english: 'October-November' },
            { name: 'मंसिर', days: 30, english: 'November-December' },
            { name: 'पौष', days: 30, english: 'December-January' },
            { name: 'माघ', days: 30, english: 'January-February' },
            { name: 'फाल्गुन', days: 30, english: 'February-March' },
            { name: 'चैत', days: 30, english: 'March-April' }
        ];

        const nepaliDigits = ['०', '१', '२', '३', '४', '५', '६', '७', '८', '९'];
        
        let currentNepaliYear = 2082;
        let currentNepaliMonth = 3;

        function convertToNepaliDigits(num) {
            return num.toString().split('').map(digit => nepaliDigits[parseInt(digit)]).join('');
        }

        function generateCalendar() {
            const calendarGrid = document.querySelector('.calendar-grid');
            const existingDays = calendarGrid.querySelectorAll('.calendar-day');
            existingDays.forEach(day => day.remove());
            
            const month = nepaliMonths[currentNepaliMonth];
            const daysInMonth = month.days;
            
            document.getElementById('nepali-month-year').textContent = 
                `${month.name} ${convertToNepaliDigits(currentNepaliYear)}`;
            document.getElementById('english-month-year').textContent = 
                `${month.english} ${currentNepaliYear - 57}`;
            
            let startDay = 1;
            
            for (let i = 0; i < startDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day empty';
                calendarGrid.appendChild(emptyDay);
            }
            
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.innerHTML = `
                    <span class="nepali-day">${convertToNepaliDigits(day)}</span>
                    <span class="english-day">${day}</span>
                `;
                
                if (day === 17) {
                    dayElement.classList.add('today');
                }
                
                if (day === 15) {
                    dayElement.classList.add('festival');
                    dayElement.innerHTML += '<div class="festival-marker">जन्माष्टमी</div>';
                }
                
                calendarGrid.appendChild(dayElement);
            }
            
            updateTodayInfo();
        }

        function updateTodayInfo() {
            const todayNepali = document.getElementById('today-nepali');
            const todayEnglish = document.getElementById('today-english');
            const festivalInfo = document.getElementById('festival-info');
            
            todayNepali.textContent = `${convertToNepaliDigits(currentNepaliYear)} ${nepaliMonths[currentNepaliMonth].name} ${convertToNepaliDigits(17)}`;
            todayEnglish.textContent = 'August 17, 2025';
            
            const festivals = [
                'Today: No special events',
                'Today: जन्माष्टमी (Krishna Janmashtami)',
                'Today: गणेश चतुर्थी (Ganesh Chaturthi)',
                'Today: तीज (Teej Festival)'
            ];
            
            festivalInfo.innerHTML = `
                <i class="fas fa-star"></i>
                <span>${festivals[Math.floor(Math.random() * festivals.length)]}</span>
            `;
        }

        function previousMonth() {
            currentNepaliMonth--;
            if (currentNepaliMonth < 0) {
                currentNepaliMonth = 11;
                currentNepaliYear--;
            }
            generateCalendar();
        }

        function nextMonth() {
            currentNepaliMonth++;
            if (currentNepaliMonth > 11) {
                currentNepaliMonth = 0;
                currentNepaliYear++;
            }
            generateCalendar();
        }

        // Clock and Location (keeping your original)
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            const dateString = now.toLocaleDateString();
            const clockElement = document.getElementById('clock');
            if (clockElement) {
                clockElement.innerHTML = `<i class="fas fa-clock"></i> ${timeString} | ${dateString}`;
            }
        }
        setInterval(updateClock, 1000);
        updateClock();

        function getLocation() {
            const locationElement = document.getElementById('location');
            if (locationElement) {
                locationElement.innerHTML = "<i class='fas fa-map-marker-alt'></i> Chitwan, Nepal";
            }
        }
        getLocation();

        // Calculator functions (keeping your original)
        function appendToCalc(value) {
            document.getElementById('calc-display').value += value;
        }

        function clearCalc() {
            document.getElementById('calc-display').value = '';
        }

        function deleteLast() {
            let display = document.getElementById('calc-display');
            display.value = display.value.slice(0, -1);
        }

        function calculate() {
            try {
                let result = eval(document.getElementById('calc-display').value.replace('×', '*').replace('÷', '/').replace('−', '-'));
                document.getElementById('calc-display').value = result;
            } catch (error) {
                document.getElementById('calc-display').value = 'Error';
            }
        }

        // Unit Converter Functions (keeping your original)
        function updateUnits() {
            const unitType = document.getElementById('unit-type').value;
            const fromUnit = document.getElementById('from-unit');
            const toUnit = document.getElementById('to-unit');
            
            let units = {};
            
            switch(unitType) {
                case 'length':
                    units = {m: 'Meters', cm: 'Centimeters', ft: 'Feet', in: 'Inches'};
                    break;
                case 'area':
                    units = {m2: 'Square Meters', cm2: 'Square Centimeters', ft2: 'Square Feet'};
                    break;
                case 'weight':
                    units = {kg: 'Kilograms', g: 'Grams', lb: 'Pounds', oz: 'Ounces'};
                    break;
                case 'temperature':
                    units = {c: 'Celsius', f: 'Fahrenheit', k: 'Kelvin'};
                    break;
            }
            
            fromUnit.innerHTML = '';
            toUnit.innerHTML = '';
            
            for (let unit in units) {
                fromUnit.innerHTML += `<option value="${unit}">${units[unit]}</option>`;
                toUnit.innerHTML += `<option value="${unit}">${units[unit]}</option>`;
            }
        }

        function convertUnits() {
            const fromValue = parseFloat(document.getElementById('from-value').value);
            const fromUnit = document.getElementById('from-unit').value;
            const toUnit = document.getElementById('to-unit').value;
            const unitType = document.getElementById('unit-type').value;
            
            if (!fromValue) return;
            
            let result = 0;
            
            if (unitType === 'length') {
                const meters = convertToMeters(fromValue, fromUnit);
                result = convertFromMeters(meters, toUnit);
            }
            
            document.getElementById('to-value').value = result.toFixed(4);
        }

        function convertToMeters(value, unit) {
            switch(unit) {
                case 'm': return value;
                case 'cm': return value / 100;
                case 'ft': return value * 0.3048;
                case 'in': return value * 0.0254;
                default: return value;
            }
        }

        function convertFromMeters(value, unit) {
            switch(unit) {
                case 'm': return value;
                case 'cm': return value * 100;
                case 'ft': return value / 0.3048;
                case 'in': return value / 0.0254;
                default: return value;
            }
        }

        // Weather function (simplified)
        function getWeather() {
            const city = document.getElementById('city-input').value;
            // Simulate weather data
            document.getElementById('weather-location').textContent = `${city}, Nepal`;
            document.getElementById('temperature').textContent = `${Math.floor(Math.random() * 15 + 15)}°`;
            document.getElementById('condition').textContent = ['Sunny', 'Cloudy', 'Rainy'][Math.floor(Math.random() * 3)];
            document.getElementById('humidity').textContent = `${Math.floor(Math.random() * 40 + 30)}%`;
            document.getElementById('wind').textContent = `${Math.floor(Math.random() * 20 + 5)} km/h`;
            document.getElementById('feels-like').textContent = `${Math.floor(Math.random() * 15 + 18)}°`;
        }

        // Game functions (keeping your original game code)
        let gameScore = 0;
        let gameTime = 30;
        let gameLevel = 1;
        let gameRunning = false;
        let gameInterval = null;

        function startTapGame() {
            gameRunning = true;
            gameScore = 0;
            gameTime = 30;
            gameLevel = 1;
            
            document.getElementById('game-score').textContent = gameScore;
            document.getElementById('game-time').textContent = gameTime;
            document.getElementById('game-level').textContent = gameLevel;
            
            document.getElementById('start-game-btn').style.display = 'none';
            document.getElementById('pause-game-btn').style.display = 'inline-flex';
            
            document.querySelector('.game-instructions').style.display = 'none';
            
            gameInterval = setInterval(() => {
                gameTime--;
                document.getElementById('game-time').textContent = gameTime;
                
                if (gameTime <= 0) {
                    endTapGame();
                }
                
                // Spawn targets
                if (Math.random() < 0.7) {
                    spawnTarget();
                }
            }, 1000);
        }

        function spawnTarget() {
            const gameArea = document.getElementById('game-area');
            const target = document.createElement('div');
            target.className = 'game-target';
            
            const types = ['red', 'blue', 'golden'];
            const type = types[Math.floor(Math.random() * types.length)];
            target.classList.add(type);
            
            target.style.left = Math.random() * (gameArea.offsetWidth - 60) + 'px';
            target.style.top = Math.random() * (gameArea.offsetHeight - 60) + 'px';
            
            target.addEventListener('click', () => {
                const points = { red: 10, blue: 15, golden: 25 }[type];
                gameScore += points;
                document.getElementById('game-score').textContent = gameScore;
                target.remove();
                
                // Level up every 100 points
                if (gameScore > 0 && gameScore % 100 === 0) {
                    gameLevel++;
                    document.getElementById('game-level').textContent = gameLevel;
                }
            });
            
            gameArea.appendChild(target);
            
            // Remove target after timeout
            setTimeout(() => {
                if (target.parentElement) {
                    target.remove();
                }
            }, 2000 - (gameLevel * 100));
        }

        function pauseGame() {
            if (gameRunning) {
                clearInterval(gameInterval);
                gameRunning = false;
                document.getElementById('pause-game-btn').innerHTML = '<i class="fas fa-play"></i> Resume';
            } else {
                startTapGame();
            }
        }

        function resetGame() {
            clearInterval(gameInterval);
            gameRunning = false;
            gameScore = 0;
            gameTime = 30;
            gameLevel = 1;
            
            document.getElementById('game-score').textContent = gameScore;
            document.getElementById('game-time').textContent = gameTime;
            document.getElementById('game-level').textContent = gameLevel;
            
            document.getElementById('start-game-btn').style.display = 'inline-flex';
            document.getElementById('pause-game-btn').style.display = 'none';
            
            document.querySelector('.game-instructions').style.display = 'block';
            
            // Remove all targets
            document.querySelectorAll('.game-target').forEach(target => target.remove());
        }

        function endTapGame() {
            clearInterval(gameInterval);
            gameRunning = false;
            
            document.getElementById('start-game-btn').style.display = 'inline-flex';
            document.getElementById('pause-game-btn').style.display = 'none';
            document.querySelector('.game-instructions').style.display = 'block';
            
            // Check if it's a high score
            if (isHighScore(gameScore)) {
                showNameModal(gameScore);
            } else {
                alert(`🎮 Game Over!\n\nFinal Score: ${gameScore} points\nLevel Reached: ${gameLevel}`);
            }
            
            // Remove all targets
            document.querySelectorAll('.game-target').forEach(target => target.remove());
        }

        // Leaderboard functions (keeping your original)
        let currentGameScore = 0;
        let playerIP = 'Unknown';

        async function getUserIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                ctx.textBaseline = 'top';
                ctx.font = '14px Arial';
                ctx.fillText('Fingerprint', 2, 2);
                const fingerprint = canvas.toDataURL().slice(-50);
                return 'User-' + fingerprint.slice(-8);
            }
        }

        getUserIP().then(ip => {
            playerIP = ip;
            const playerIPElement = document.getElementById('player-ip');
            if (playerIPElement) {
                playerIPElement.textContent = ip;
            }
        });

        function getCurrentMonthKey() {
            const now = new Date();
            return `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}`;
        }

        function getCurrentMonthDisplay() {
            const now = new Date();
            return now.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
        }

        function loadLeaderboard() {
            const monthKey = getCurrentMonthKey();
            const stored = localStorage.getItem(`leaderboard-${monthKey}`);
            return stored ? JSON.parse(stored) : [];
        }

        function saveLeaderboard(leaderboard) {
            const monthKey = getCurrentMonthKey();
            localStorage.setItem(`leaderboard-${monthKey}`, JSON.stringify(leaderboard));
        }

        function isHighScore(score) {
            const leaderboard = loadLeaderboard();
            return leaderboard.length < 10 || score > leaderboard[leaderboard.length - 1].score;
        }

        function addScoreToLeaderboard(playerName, score, ip) {
            const leaderboard = loadLeaderboard();
            const now = new Date();
            
            const newEntry = {
                name: playerName || ip,
                score: score,
                ip: ip,
                date: now.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),
                timestamp: now.getTime()
            };
            
            const existingIndex = leaderboard.findIndex(entry => entry.ip === ip);
            
            if (existingIndex !== -1) {
                if (score > leaderboard[existingIndex].score) {
                    leaderboard[existingIndex] = newEntry;
                }
            } else {
                leaderboard.push(newEntry);
            }
            
            leaderboard.sort((a, b) => b.score - a.score);
            const topLeaderboard = leaderboard.slice(0, 10);
            
            saveLeaderboard(topLeaderboard);
            displayLeaderboard();
        }

        function displayLeaderboard() {
            const leaderboard = loadLeaderboard();
            const container = document.getElementById('leaderboard-table');
            const noScores = document.getElementById('no-scores');
            const monthDisplay = document.getElementById('current-month');
            
            if (monthDisplay) {
                monthDisplay.textContent = getCurrentMonthDisplay();
            }
            
            if (leaderboard.length === 0) {
                if (noScores) noScores.style.display = 'block';
                const rows = container.querySelectorAll('.leaderboard-row:not(.header)');
                rows.forEach(row => row.remove());
                return;
            }
            
            if (noScores) noScores.style.display = 'none';
            
            const existingRows = container.querySelectorAll('.leaderboard-row:not(.header)');
            existingRows.forEach(row => row.remove());
            
            leaderboard.forEach((entry, index) => {
                const row = document.createElement('div');
                row.className = `leaderboard-row ${index < 3 ? 'top-' + (index + 1) : ''}`;
                
                row.innerHTML = `
                    <span class="rank">${index + 1}</span>
                    <span class="name" title="${entry.name}">${entry.name}</span>
                    <span class="score">${entry.score}</span>
                    <span class="date">${entry.date}</span>
                `;
                
                container.appendChild(row);
            });
        }

        function showNameModal(score) {
            currentGameScore = score;
            const modalScoreElement = document.getElementById('modal-score');
            const playerNameElement = document.getElementById('player-name');
            const nameModal = document.getElementById('name-modal');
            
            if (modalScoreElement) modalScoreElement.textContent = score;
            if (playerNameElement) playerNameElement.value = '';
            if (nameModal) nameModal.style.display = 'flex';
            
            setTimeout(() => {
                if (playerNameElement) playerNameElement.focus();
            }, 300);
        }

        function saveScore() {
            const playerNameElement = document.getElementById('player-name');
            const playerName = playerNameElement ? playerNameElement.value.trim() : '';
            const displayName = playerName || playerIP;
            
            addScoreToLeaderboard(displayName, currentGameScore, playerIP);
            closeModal();
            
            setTimeout(() => {
                alert('🎉 Score saved! You\'re now on the leaderboard as "' + displayName + '"!');
            }, 500);
        }

        function closeModal() {
            const nameModal = document.getElementById('name-modal');
            if (nameModal) nameModal.style.display = 'none';
        }

        function clearLeaderboard() {
            if (confirm('Are you sure you want to clear the monthly leaderboard? This cannot be undone.')) {
                const monthKey = getCurrentMonthKey();
                localStorage.removeItem(`leaderboard-${monthKey}`);
                displayLeaderboard();
                alert('✅ Leaderboard cleared!');
            }
        }

        // Snake Game (simplified version)
        let snakeScore = 0;
        let snakeSpeed = 1;
        let snakeLength = 1;

        document.getElementById('snake-start')?.addEventListener('click', function() {
            alert('🐍 Snake Game Started!\n\nUse arrow keys to control the snake.\nEat food to grow and increase your score!');
            snakeScore = Math.floor(Math.random() * 500);
            snakeLength = Math.floor(Math.random() * 20 + 1);
            snakeSpeed = Math.floor(Math.random() * 5 + 1);
            
            document.getElementById('snake-score').textContent = snakeScore;
            document.getElementById('snake-length').textContent = snakeLength;
            document.getElementById('snake-speed').textContent = snakeSpeed;
        });

        document.getElementById('snake-pause')?.addEventListener('click', function() {
            alert('⏸️ Snake Game Paused');
        });

        document.getElementById('snake-reset')?.addEventListener('click', function() {
            snakeScore = 0;
            snakeLength = 1;
            snakeSpeed = 1;
            
            document.getElementById('snake-score').textContent = snakeScore;
            document.getElementById('snake-length').textContent = snakeLength;
            document.getElementById('snake-speed').textContent = snakeSpeed;
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                const nameModal = document.getElementById('name-modal');
                if (nameModal && nameModal.style.display === 'flex') {
                    saveScore();
                }
            }
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // Initialize everything on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎯 Initializing website...');
            
            // Initialize License Hub
            licenseHub = new LicenseHub();
            
            // Initialize other components
            updateUnits();
            getWeather();
            generateCalendar();
            displayLeaderboard();
            
            // Initialize NEPSE
            console.log('🎯 Starting Real NEPSE System...');
            nepseManager = new RealNepseData();
            nepseManager.init();
            
            console.log('✅ Website fully loaded with License Preparation Hub!');
        });

        // Manual refresh on status click
        document.addEventListener('click', function(e) {
            if (e.target.closest('.status-indicator')) {
                refreshNepseData();
            }
        });
    </script>
</body>
</html>

