<!-- =====================================================================
     SHITAL GHIMIRE • FULL REWRITE  –  ADVANCED TOOLS & 3-D GAMES DEMO
     ===================================================================== -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Shital Ghimire | Civil Engineer & 3-D Games Enthusiast</title>

<!-- FontAwesome & Styles -->
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="stylesheet" href="style.css">

<!-- Three-JS for 3-D games -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
</head>
<body>

<!-- ================================================== NAVIGATION ====== -->
<nav class="navbar">
  <div class="nav-container">
    <div class="nav-logo">Shital Ghimire</div>
    <ul class="nav-menu">
      <li><a href="#home">Home</a></li>
      <li><a href="#games">Games</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
  </div>
</nav>

<!-- ====================================================== HERO ======== -->
<section id="home" class="hero">
  <div class="hero-container">
    <div class="hero-content">
      <h1>Full-Stack Civil Engineer & Creative Coder</h1>
      <p>Building sustainable infrastructure by day, crafting immersive web
         experiences by night.</p>
      <div class="hero-buttons">
        <a href="#games" class="btn-primary">Play Games</a>
        <a href="#contact" class="btn-secondary">Get in Touch</a>
      </div>
      <div id="clock" class="clock"></div>
    </div>
    <div class="hero-image">
      <canvas id="hero-blob" width="350" height="350"></canvas>
    </div>
  </div>
</section>

<!-- ===================================================== GAMES ======== -->
<section id="games" class="games">
  <div class="container">
    <div class="section-header">
      <h2><i class="fas fa-gamepad"></i> Interactive Games</h2>
      <div class="section-line"></div>
      <p>Each game runs entirely in-browser, stores its own leaderboard, and
         scales down gracefully on mobile.</p>
    </div>

    <!-- 1 ▸ 3-D SNAKE ----------------------------------------------- -->
    <div class="game-card snake-game-card">
      <div class="game-header">
        <div class="game-icon"><i class="fas fa-apple-alt"></i></div>
        <div class="game-info">
          <h3>Snake 3-D</h3>
          <p>Classic snake re-imagined in three dimensions. Use <kbd>WASD</kbd> or
             arrow keys, grab floating apples, avoid self-collisions.</p>
        </div>
      </div>

      <div class="game-stats">
        <div class="stat-box">
          <div class="stat-icon"><i class="fas fa-star"></i></div>
          <div class="stat-value" id="snake-score">0</div>
          <div class="stat-label">Score</div>
        </div>
        <div class="stat-box">
          <div class="stat-icon"><i class="fas fa-rocket"></i></div>
          <div class="stat-value" id="snake-speed">1×</div>
          <div class="stat-label">Speed</div>
        </div>
      </div>

      <div class="game-area-container">
        <canvas id="snake-canvas" width="600" height="400"></canvas>
      </div>

      <div class="game-controls" data-lb="snake">
        <button class="game-btn start-btn"><i class="fas fa-play"></i>Start</button>
        <button class="game-btn pause-btn" style="display:none;">
          <i class="fas fa-pause"></i>Pause
        </button>
        <button class="game-btn reset-btn"><i class="fas fa-redo"></i>Reset</button>
      </div>

      <!-- Snake Leaderboard -->
      <div class="leaderboard-section" data-lb="snake">
        <h4><i class="fas fa-crown"></i> Snake Leaderboard</h4>
        <ol class="leaderboard-list"></ol>
      </div>
    </div>

    <!-- 2 ▸ MEMORY-MATCH with 3-D Flip ------------------------------- -->
    <div class="game-card memory-game-card">
      <div class="game-header">
        <div class="game-icon"><i class="fas fa-brain"></i></div>
        <div class="game-info">
          <h3>Memory Match AR</h3>
          <p>Flip animated cards in 3-D space and match pairs before time
             runs out.</p>
        </div>
      </div>

      <div class="game-stats">
        <div class="stat-box">
          <div class="stat-icon"><i class="fas fa-trophy"></i></div>
          <div class="stat-value" id="memory-moves">0</div>
          <div class="stat-label">Moves</div>
        </div>
        <div class="stat-box">
          <div class="stat-icon"><i class="fas fa-clock"></i></div>
          <div class="stat-value" id="memory-time">90</div>
          <div class="stat-label">Time</div>
        </div>
      </div>

      <div class="game-area-container">
        <div id="memory-grid" class="memory-grid"></div>
      </div>

      <div class="game-controls" data-lb="memory">
        <button class="game-btn start-btn"><i class="fas fa-play"></i>Start</button>
        <button class="game-btn reset-btn"><i class="fas fa-redo"></i>Reset</button>
      </div>

      <!-- Memory Leaderboard -->
      <div class="leaderboard-section" data-lb="memory">
        <h4><i class="fas fa-crown"></i> Memory Leaderboard</h4>
        <ol class="leaderboard-list"></ol>
      </div>
    </div>

    <!-- 3 ▸ TAP-THE-TARGET RUSH (upgraded) --------------------------- -->
    <div class="game-card tap-game-card">
      <div class="game-header">
        <div class="game-icon"><i class="fas fa-bullseye"></i></div>
        <div class="game-info">
          <h3>Tap-the-Target Rush</h3>
          <p>Dynamic SVG targets scale, rotate, and explode with particles.
             Progressively faster levels – how long can you survive?</p>
        </div>
      </div>

      <div class="game-stats">
        <div class="stat-box">
          <div class="stat-icon"><i class="fas fa-star-half-alt"></i></div>
          <div class="stat-value" id="tap-score">0</div>
          <div class="stat-label">Score</div>
        </div>
        <div class="stat-box">
          <div class="stat-icon"><i class="fas fa-level-up-alt"></i></div>
          <div class="stat-value" id="tap-level">1</div>
          <div class="stat-label">Level</div>
        </div>
        <div class="stat-box">
          <div class="stat-icon"><i class="fas fa-stopwatch"></i></div>
          <div class="stat-value" id="tap-time">30</div>
          <div class="stat-label">Time</div>
        </div>
      </div>

      <div class="game-area-container">
        <svg id="tap-stage" width="600" height="400"></svg>
      </div>

      <div class="game-controls" data-lb="tap">
        <button class="game-btn start-btn"><i class="fas fa-play"></i>Start</button>
        <button class="game-btn pause-btn" style="display:none;">
          <i class="fas fa-pause"></i>Pause
        </button>
        <button class="game-btn reset-btn"><i class="fas fa-redo"></i>Reset</button>
      </div>

      <!-- Tap Leaderboard -->
      <div class="leaderboard-section" data-lb="tap">
        <h4><i class="fas fa-crown"></i> Tap Leaderboard</h4>
        <ol class="leaderboard-list"></ol>
      </div>
    </div>
  </div>
</section>

<!-- =================================================== CONTACT ======= -->
<section id="contact" class="contact">
  <div class="container">
    <h2>Contact Me</h2>
    <div class="contact-info">
      <div class="contact-item">
        <i class="fas fa-envelope"></i>
        <div>
          <h3>Email</h3>
          <p><a href="mailto:shitalghimire817@gmail.com">
             shitalghimire817@gmail.com</a></p>
        </div>
      </div>
      <div class="contact-item">
        <i class="fas fa-map-marker-alt"></i>
        <div>
          <h3>Location</h3>
          <p>Tandi, Chitwan, Nepal</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ===================================================== FOOTER ====== -->
<footer class="footer">
  <div class="container">
    <p>&copy; 2025 Shital Ghimire — All rights reserved.</p>
  </div>
</footer>

<!-- ==================================================== SCRIPTS ====== -->
<script>
/* ===== Utility: clock & hero blob =================================== */
const clock = document.getElementById('clock');
setInterval(()=>clock.textContent =
  new Date().toLocaleTimeString('en-GB',{hour12:false}),'1000');
/* Simple metaball animation on the hero canvas using Three-JS */
(() => {
  const canvas = document.getElementById('hero-blob');
  const renderer = new THREE.WebGLRenderer({ canvas, alpha:true });
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(45,1,0.1,1000);
  camera.position.z = 3;
  const geometry = new THREE.IcosahedronGeometry(1,2);
  const material = new THREE.MeshNormalMaterial({ wireframe:true });
  const mesh = new THREE.Mesh(geometry, material);
  scene.add(mesh);
  const animate = () => {
    mesh.rotation.x += 0.002; mesh.rotation.y += 0.003;
    renderer.render(scene,camera); requestAnimationFrame(animate);
  };
  animate();
})();

/* ===== LocalStorage Leaderboard helper ============================== */
class Leaderboard {
  constructor(key, max=10) { this.key=key; this.max=max; }
  get data() { return JSON.parse(localStorage.getItem(this.key)||'[]'); }
  push(score) {
    const board = [...this.data, score].sort((a,b)=>b.score-a.score)
                  .slice(0,this.max);
    localStorage.setItem(this.key, JSON.stringify(board));
    return board;
  }
  render(ol) {
    ol.innerHTML = this.data.map(
      (s,i)=>`<li><span>#${i+1}</span> <strong>${s.name}</strong>
              <em>${s.score}</em></li>`).join('');
  }
}

/* ===== 1 • SNAKE 3-D =============================================== */
(() =>{
  const canvas = document.getElementById('snake-canvas');
  if(!canvas) return;
  const renderer = new THREE.WebGLRenderer({ canvas, antialias:true });
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(70,1.5,0.1,1000);
  camera.position.set(0,15,25); camera.lookAt(0,0,0);
  const gridHelper = new THREE.GridHelper(40,20,0x444444,0x222222);
  scene.add(gridHelper);

  const snakeMat = new THREE.MeshLambertMaterial({ color:0x2ecc71 });
  const appleMat = new THREE.MeshLambertMaterial({ color:0xe74c3c });
  const cubeGeo = new THREE.BoxGeometry(2,2,2);
  let snake=[], dir='RIGHT', apple, speed=6, score=0, tick=0, alive=false;
  const lb = new Leaderboard('lb-snake');

  /* lights */
  scene.add(new THREE.AmbientLight(0x888888));
  const dl = new THREE.DirectionalLight(0xffffff,0.8);
  dl.position.set(10,20,10); scene.add(dl);

  function spawnApple(){
    if(apple){ scene.remove(apple.mesh); }
    const pos = ()=>Math.floor((Math.random()*18-9))*2;
    apple = { x:pos(), z:pos() };
    apple.mesh = new THREE.Mesh(cubeGeo, appleMat);
    apple.mesh.position.set(apple.x,1,apple.z);
    scene.add(apple.mesh);
  }

  function reset(){
    snake.forEach(s=>scene.remove(s.mesh));
    snake=[{x:0,z:0}];
    snake[0].mesh=new THREE.Mesh(cubeGeo,snakeMat);
    scene.add(snake.mesh);
    dir='RIGHT'; spawnApple(); speed=6; score=0; tick=0; alive=true;
    document.getElementById('snake-score').textContent=score;
    document.getElementById('snake-speed').textContent='1×';
  }

  function move(){
    if(!alive) return;
    tick=(tick+1)%Math.floor(60/speed);
    if(tick) return;

    const head={...snake};
    if(dir==='LEFT')  head.x-=2;
    if(dir==='RIGHT') head.x+=2;
    if(dir==='UP')    head.z-=2;
    if(dir==='DOWN')  head.z+=2;
    // wall / self collision
    if(Math.abs(head.x)>18 || Math.abs(head.z)>18 ||
       snake.some(s=>s.x===head.x&&s.z===head.z)){ alive=false; gameOver(); return;}
    const bodyMesh=new THREE.Mesh(cubeGeo,snakeMat);
    bodyMesh.position.set(head.x,1,head.z);
    scene.add(bodyMesh);
    snake.unshift({ ...head, mesh:bodyMesh });

    // apple eat?
    if(head.x===apple.x && head.z===apple.z){
      score+=10; speed+=0.3;
      document.getElementById('snake-score').textContent=score;
      document.getElementById('snake-speed').textContent=(speed/6).toFixed(1)+'×';
      spawnApple();
    }else{
      const tail=snake.pop();
      scene.remove(tail.mesh);
    }
  }

  function gameOver(){
    const name=prompt('Game Over! Enter name for leaderboard:',"Anon");
    lb.push({name:name||'Anon', score});
    lb.render(document.querySelector('[data-lb="snake"] .leaderboard-list'));
  }

  /* controls */
  document.addEventListener('keydown',e=>{
    if(e.key==='ArrowLeft'||e.key==='a') if(dir!=='RIGHT') dir='LEFT';
    if(e.key==='ArrowRight'||e.key==='d')if(dir!=='LEFT')  dir='RIGHT';
    if(e.key==='ArrowUp'||e.key==='w')   if(dir!=='DOWN')  dir='UP';
    if(e.key==='ArrowDown'||e.key==='s') if(dir!=='UP')    dir='DOWN';
  });

  const card=document.querySelector('.snake-game-card');
  card.querySelector('.start-btn').onclick=reset;
  card.querySelector('.reset-btn').onclick=reset;
  card.querySelector('.pause-btn').onclick=e=>{
    alive=!e.target.classList.toggle('paused');
    e.target.innerHTML= alive?
      '<i class="fas fa-pause"></i>Pause':'<i class="fas fa-play"></i>Resume';
  };
  lb.render(card.querySelector('.leaderboard-list'));

  /* loop */
  const render=()=>{ requestAnimationFrame(render); move(); renderer.render(scene,camera);}
  render();
})();

/* ===== 2 • MEMORY-MATCH ============================================ */
(() =>{
  const grid=document.getElementById('memory-grid');
  if(!grid) return;
  const emojis=['🍎','🚀','🎲','🎯','🐍','⭐','⚡','🎁'];
  const lb=new Leaderboard('lb-memory');

  let timer,moves,time,opened,locked;
  const movesEl=document.getElementById('memory-moves');
  const timeEl=document.getElementById('memory-time');

  function build(){
    grid.innerHTML='';
    const deck=[...emojis,...emojis].sort(()=>Math.random()-0.5);
    deck.forEach(sym=>{
      grid.insertAdjacentHTML('beforeend',`
        <div class="memory-card">
          <div class="memory-inner">
            <div class="memory-front"></div>
            <div class="memory-back">${sym}</div>
          </div>
        </div>`);
    });
    moves=0; time=90; opened=[]; locked=false;
    movesEl.textContent=moves; timeEl.textContent=time;
  }

  function tick(){
    if(--time<0){ gameEnd(false); return;}
    timeEl.textContent=time;
  }
  function flip(card){
    if(locked||opened.includes(card)||card.classList.contains('match'))return;
    card.classList.add('flip'); opened.push(card);
    if(opened.length===2){
      movesEl.textContent=++moves;
      const match = opened[0].querySelector('.memory-back').textContent ===
                    opened[1].querySelector('.memory-back').textContent;
      if(match){
        opened.forEach(c=>c.classList.add('match'));
        opened=[];
        if([...grid.children].every(c=>c.classList.contains('match'))){gameEnd(true);}
      }else{
        locked=true;
        setTimeout(()=>{opened.forEach(c=>c.classList.remove('flip'));
          opened=[];locked=false;},700);
      }
    }
  }
  function gameEnd(win){
    clearInterval(timer);
    if(win){
      const name=prompt('Great job! Enter your name for leaderboard:',"Anon");
      lb.push({name:name||'Anon',score:10000-time*10-moves*5});
      lb.render(document.querySelector('[data-lb="memory"] .leaderboard-list'));
    }else alert('⏰ Time Up!');
  }

  grid.addEventListener('click',e=>{
    const card=e.target.closest('.memory-card'); if(card) flip(card);
  });

  const card=document.querySelector('.memory-game-card');
  card.querySelector('.start-btn').onclick=()=>{
    build(); clearInterval(timer); timer=setInterval(tick,1000);
  };
  card.querySelector('.reset-btn').onclick=build;
  lb.render(card.querySelector('.leaderboard-list'));
  build();
})();

/* ===== 3 • TAP-THE-TARGET RUSH ===================================== */
(() =>{
  const svg = document.getElementById('tap-stage');
  if(!svg) return;
  const scoreEl=document.getElementById('tap-score');
  const levelEl=document.getElementById('tap-level');
  const timeEl=document.getElementById('tap-time');
  const lb=new Leaderboard('lb-tap');

  let score=0, level=1, time=30, interval, running=false;

  function spawn(){
    const size=30+Math.random()*40;
    const cx=Math.random()*(svg.clientWidth-size)+size/2;
    const cy=Math.random()*(svg.clientHeight-size)+size/2;
    const g=document.createElementNS('http://www.w3.org/2000/svg','g');
    g.innerHTML=`<circle r="${size/2}" cx="${cx}" cy="${cy}" fill="#e74c3c">
                 </circle>`;
    g.style.cursor='pointer';
    svg.appendChild(g);

    g.onclick=()=>{
      score+=10*level; scoreEl.textContent=score;
      svg.removeChild(g);
      explode(cx,cy);
      if(score%100===0){level++;levelEl.textContent=level;}
    };
    setTimeout(()=>{ if(svg.contains(g)) svg.removeChild(g);},3000/level);
  }
  function explode(x,y){
    for(let i=0;i<12;i++){
      const p=document.createElementNS('http://www.w3.org/2000/svg','circle');
      p.setAttribute('r',3);
      p.setAttribute('cx',x); p.setAttribute('cy',y);
      p.setAttribute('fill','#fff');
      svg.appendChild(p);
      const angle=Math.random()*Math.PI*2;
      const distance=50+Math.random()*30;
      p.animate([{transform:`translate(0,0)`},
                 {transform:`translate(${Math.cos(angle)*distance}px,
                                        ${Math.sin(angle)*distance}px)`,opacity:0}],
                 {duration:600,easing:'ease-out',fill:'forwards'})
        .onfinish=()=>svg.removeChild(p);
    }
  }
  function tick(){
    if(--time<0){ stop(); return;}
    timeEl.textContent=time;
    spawn();
  }
  function start(){
    if(running) return;
    running=true; score=0; level=1; time=30;
    scoreEl.textContent=0; levelEl.textContent=1; timeEl.textContent=30;
    interval=setInterval(tick,800);
  }
  function stop(){
    running=false; clearInterval(interval); svg.innerHTML='';
    const name=prompt('Nice score! Name for leaderboard:',"Anon");
    lb.push({name:name||'Anon', score});
    lb.render(document.querySelector('[data-lb="tap"] .leaderboard-list'));
  }
  function reset(){ stop(); scoreEl.textContent=0; timeEl.textContent=30; }

  const card=document.querySelector('.tap-game-card');
  card.querySelector('.start-btn').onclick=start;
  card.querySelector('.pause-btn').onclick=e=>{
    if(running){ clearInterval(interval); running=false;
      e.target.innerHTML='<i class="fas fa-play"></i>Resume';
    }else { interval=setInterval(tick,800); running=true;
      e.target.innerHTML='<i class="fas fa-pause"></i>Pause';}
  };
  card.querySelector('.reset-btn').onclick=reset;
  lb.render(card.querySelector('.leaderboard-list'));
})();
</script>
</body>
</html>
